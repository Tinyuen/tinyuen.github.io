<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tinyuen æ˜¯å°è™å•Š ğŸ¯</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tianxiaohu.online/"/>
  <updated>2021-08-09T06:35:13.236Z</updated>
  <id>https://tianxiaohu.online/</id>
  
  <author>
    <name>Tinyuen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>React ä¸­å„ç§å®ç° Refs çš„æ–¹å¼æ€»ç»“</title>
    <link href="https://tianxiaohu.online/2020/05/29/front-end/react/react-refs/"/>
    <id>https://tianxiaohu.online/2020/05/29/front-end/react/react-refs/</id>
    <published>2020-05-29T23:11:38.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¸¸è§„çš„ React æ•°æ®æµä¸­ï¼Œprops æ˜¯çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ã€‚è¦ä¿®æ”¹å­å…ƒç´ ï¼Œä½ éœ€è¦ç”¨æ–°çš„ props å»é‡æ–°æ¸²æŸ“å­å…ƒç´ ã€‚ç„¶è€Œï¼Œåœ¨å°‘æ•°æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å¸¸è§„æ•°æ®æµå¤–å¼ºåˆ¶ä¿®æ”¹å­å…ƒç´ ã€‚è¢«ä¿®æ”¹çš„å­å…ƒç´ å¯ä»¥æ˜¯ React ç»„ä»¶å®ä¾‹ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact æä¾›äº†è§£å†³åŠæ³•ã€‚æ–‡ç« ä¸­ä¼šè®²åˆ° <code>React.useRef</code>ã€<code>React.createRef</code>ã€<code>React.forwardRef</code>ã€<code>å›è°ƒ Refs</code> ç›¸å…³çŸ¥è¯†ã€‚</p><a id="more"></a><p>ä½ å¯èƒ½é¦–å…ˆä¼šæƒ³åˆ°åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ <code>Refs</code> æ¥æ›´æ–°ç»„ä»¶ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¯·èŠ±ä¸€ç‚¹æ—¶é—´ï¼Œæƒ³æƒ³æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡ <code>state</code> çš„æ–¹å¼æ¥å®ç°ï¼ŒReact ä¸å»ºè®®è¿‡å¤šçš„ä½¿ç”¨ <code>Refs</code>ã€‚<code>Refs</code> ä¼šä½¿ç»„ä»¶çš„å®ä¾‹æˆ–è€…æ˜¯DOMç»“æ„æš´éœ²ï¼Œè¿åç»„ä»¶å°è£…çš„åŸåˆ™ã€‚</p><p>ä½†æ˜¯æœ‰äº›åœºæ™¯ä¸‹è¿™ä¼šéå¸¸æœ‰ç”¨ï¼š</p><ul><li>å¤„ç†focusã€æ–‡æœ¬é€‰æ‹©æˆ–è€…åª’ä½“æ’­æ”¾</li><li>è§¦å‘å¼ºåˆ¶åŠ¨ç”»</li><li>é›†æˆç¬¬ä¸‰æ–¹DOMåº“</li></ul><p>React ä¸­ä¸åŒçš„ç‰ˆæœ¬éƒ½æä¾›äº†ä¸åŒçš„ <code>Refs</code> ä½¿ç”¨æ–¹å¼ï¼Œä»Šå¤©æ¥æ€»ç»“ä¸‹ã€‚</p><h2 id="React-useRef"><a href="#React-useRef" class="headerlink" title="React.useRef"></a>React.useRef</h2><p>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥å¾€æ— â€œçŠ¶æ€çš„â€å‡½æ•°å¼ç»„ä»¶ï¼Œç°åœ¨ä¹Ÿå¯ä»¥â€œæœ‰çŠ¶æ€â€äº†ï¼ï¼Œå…·ä½“è¯¦è§ React çš„å®˜æ–¹æ–‡æ¡£ä»‹ç»ï¼Œè¿™é‡Œä¸åšå±•å¼€ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextInput</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputEl = useRef(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> onButtonClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// `inputEl.current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ </span></span><br><span class="line">    inputEl.current.focus();</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;input ref=&#123;inputEl&#125; <span class="keyword">type</span>=<span class="string">"text"</span> /&gt;</span><br><span class="line">      &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>useRef</code> å°±æ˜¯ React æ–°ç‰¹æ€§ä¸­æä¾›çš„ä¸€ç§ <code>Hooks</code>ï¼ˆ<a href="https://zh-hans.reactjs.org/docs/hooks-reference.html" target="_blank" rel="noopener">Hooks API ç´¢å¼•</a>ï¼‰ã€‚</p><p>useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ <code>ref</code> å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„ <code>ref</code> å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚è¿™é‡Œ React é€šè¿‡ <code>useRef</code> æ–¹æ³•è¿”å›çš„ <code>inputEl</code> ä¼ å…¥ <code>input</code> çš„ <code>ref</code> å±æ€§ï¼Œç”¨æ¥æŒ‡å‘çœŸå®çš„DOMå…ƒç´ ã€‚</p><p>å½“ç„¶ <code>useRef</code> çš„ä½œç”¨ä¸æ­¢äºæ­¤â€¦.</p><h2 id="React-createRef"><a href="#React-createRef" class="headerlink" title="React.createRef"></a>React.createRef</h2><p>ä½¿ç”¨ <code>React.createRef()</code> åˆ›å»º <code>refs</code>ï¼Œé€šè¿‡ <code>ref</code> å±æ€§æ¥è·å¾— React å…ƒç´ ã€‚å½“æ„é€ ç»„ä»¶æ—¶ï¼Œ<code>refs</code> é€šå¸¸è¢«èµ‹å€¼ç»™å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸­ä»»æ„ä¸€å¤„ä½¿ç”¨å®ƒä»¬ã€‚å½“ä¸€ä¸ª <code>ref</code> å±æ€§è¢«ä¼ é€’ç»™ä¸€ä¸ª <code>render</code> å‡½æ•°ä¸­çš„å…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>ref</code> ä¸­çš„ <code>current</code> å±æ€§å¯¹èŠ‚ç‚¹çš„å¼•ç”¨è¿›è¡Œè®¿é—®ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€æ®µä»£ç ï¼š</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> TextInput <span class="keyword">extends</span> React.Component &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª ref</span></span><br><span class="line">    <span class="keyword">this</span>.textInput = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  focusTextInput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.textInput.current.focus();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input <span class="keyword">type</span>=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.textInput&#125; /&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          <span class="keyword">type</span>=<span class="string">"button"</span></span><br><span class="line">          value=<span class="string">"Focus the text input"</span></span><br><span class="line">          onClick=&#123;<span class="keyword">this</span>.focusTextInput&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>React.createRef()</code> åˆ›å»ºäº†ä¸€ä¸ª ref èµ‹å€¼ç»™ <code>this.textInput</code>ï¼Œä¼ å…¥ <code>input</code> çš„ ref å±æ€§ï¼Œæ­¤æ—¶ <code>this.textInput.current</code> å°†ä¼šæ‹¿åˆ° input çš„çœŸå®çš„ DOMï¼Œç”¨æ¥ç›´æ¥æ“ä½œ DOMã€‚React ç»„ä»¶åœ¨åŠ è½½æ—¶å°† DOM å…ƒç´ ä¼ å…¥ ref çš„å›è°ƒå‡½æ•°ï¼Œåœ¨å¸è½½æ—¶åˆ™ä¼šä¼ å…¥ nullã€‚</p><h2 id="ä¸ºç±»ï¼ˆClassï¼‰ç»„ä»¶æ·»åŠ -Ref"><a href="#ä¸ºç±»ï¼ˆClassï¼‰ç»„ä»¶æ·»åŠ -Ref" class="headerlink" title="ä¸ºç±»ï¼ˆClassï¼‰ç»„ä»¶æ·»åŠ  Ref"></a>ä¸ºç±»ï¼ˆClassï¼‰ç»„ä»¶æ·»åŠ  Ref</h2><p>ä»¥ä¸Šé¢çš„ Class ç»„ä»¶ <code>TextInput</code> ä¸ºåŸºç¡€ç»„ä»¶ï¼Œæˆ‘ä»¬å†æ¥æ·»åŠ ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼š</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> AutoFocusTextInput <span class="keyword">extends</span> React.Component &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.textInput = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.textInput.current.focusTextInput();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;TextInput ref=&#123;<span class="keyword">this</span>.textInput&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ <code>this.textInput.current</code> å°†ä¼šå¼•ç”¨åˆ° <code>TextInput</code> å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ã€‚ç”¨æ¥è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä»…å¯¹ä»¥ç±»(class)å£°æ˜çš„ TextInput æœ‰æ•ˆï¼å› ä¸º Class ç»„ä»¶æ‰ä¼šæœ‰å®ä¾‹å¯¹è±¡ã€‚</p><h2 id="ä¸ºå‡½æ•°å¼ï¼ˆFunctionalï¼‰ç»„ä»¶æ·»åŠ -Ref"><a href="#ä¸ºå‡½æ•°å¼ï¼ˆFunctionalï¼‰ç»„ä»¶æ·»åŠ -Ref" class="headerlink" title="ä¸ºå‡½æ•°å¼ï¼ˆFunctionalï¼‰ç»„ä»¶æ·»åŠ  Ref"></a>ä¸ºå‡½æ•°å¼ï¼ˆFunctionalï¼‰ç»„ä»¶æ·»åŠ  Ref</h2><p>å› ä¸º ref å±æ€§åªèƒ½ç”¨åœ¨ Class ç»„ä»¶ä¸Šï¼Œæ‰€ä»¥ä¸‹é¢è¿™æ ·ä½¿ç”¨å°†ä¼šæ˜¯æ— æ•ˆçš„ã€‚</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FunctionalInput</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &lt;input /&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Parent <span class="keyword">extends</span> React.Component &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.textInput = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// This will *not* work!</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;FunctionalInput ref=&#123;<span class="keyword">this</span>.textInput&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£å‡½æ•°å¼ç»„ä»¶å¦‚ä½•ä½¿ç”¨ Ref å‘¢ï¼Ÿ æˆ‘çœ‹çœ‹ä¸€æ®µä»£ç :</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FunctionalInput</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// textInput ç”¨æ¥å­˜å‚¨ ref</span></span><br><span class="line">  <span class="keyword">let</span> textInput = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    textInput.focus();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input <span class="keyword">type</span>=<span class="string">"text"</span> ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> textInput = input&#125; /&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        <span class="keyword">type</span>=<span class="string">"button"</span></span><br><span class="line">        value=<span class="string">"Focus the text input"</span></span><br><span class="line">        onClick=&#123;handleClick&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );  </span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>React å°†åœ¨ç»„ä»¶æŒ‚è½½æ—¶å°† input çš„ DOM å…ƒç´ ä¼ å…¥ ref å›è°ƒå‡½æ•°å¹¶è°ƒç”¨ï¼Œè¿™æ · <code>textInput</code> å°±ä¼šæ‹¿åˆ° input çš„DOM å¼•ç”¨ã€‚å½“å¸è½½æ—¶ä¼šä¼ å…¥ null å¹¶è°ƒç”¨å®ƒè¯¥å›è°ƒå‡½æ•°ã€‚</p><h2 id="å›è°ƒ-Refs"><a href="#å›è°ƒ-Refs" class="headerlink" title="å›è°ƒ Refs"></a>å›è°ƒ Refs</h2><p>å›è°ƒ Ref ä¹Ÿæ˜¯ä¸€ç§è®¾ç½® <code>Refs</code> çš„æ–¹å¼ã€‚ref å±æ€§å°†ä¼šæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å— React ç»„ä»¶çš„å®ä¾‹æˆ– HTML DOM å…ƒç´ ä½œä¸ºå‚æ•°ï¼Œä»¥å­˜å‚¨å®ƒä»¬å¹¶ä½¿å®ƒä»¬èƒ½è¢«å…¶ä»–åœ°æ–¹è®¿é—®ã€‚</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FunctionalInput</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=&#123;props.inputRef&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Parent extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">  constructor(props) &#123;</span></span><br><span class="line"><span class="regexp">    super(props);</span></span><br><span class="line"><span class="regexp">    this.textInput = null;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  setInputRef = (el) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    this.textInput = el;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  componentDidMount() &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ æ¸²æŸ“åæ–‡æœ¬æ¡†è‡ªåŠ¨è·å¾—ç„¦ç‚¹</span></span><br><span class="line"><span class="regexp">    this.textInput.focus();</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;FunctionalInput inputRef=&#123;this.setInputRef&#125; /</span>&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒParent ä¼ é€’ç»™å®ƒçš„ ref å›è°ƒå‡½æ•°ä½œä¸º inputRef ä¼ é€’ç»™ FunctionalInputï¼Œç„¶å FunctionalInput é€šè¿‡ ref å±æ€§å°†å…¶ä¼ é€’ç»™ <code>&lt;input&gt;</code>ã€‚æœ€ç»ˆï¼ŒParent ä¸­çš„ this.textInput å°†è¢«è®¾ç½®ä¸ºä¸ FunctionalInput ä¸­çš„ <code>&lt;input&gt;</code> å…ƒç´ ç›¸å¯¹åº”çš„ DOM èŠ‚ç‚¹ã€‚</p><h2 id="æš´éœ²å­ç»„ä»¶çš„-DOM-èŠ‚ç‚¹"><a href="#æš´éœ²å­ç»„ä»¶çš„-DOM-èŠ‚ç‚¹" class="headerlink" title="æš´éœ²å­ç»„ä»¶çš„ DOM èŠ‚ç‚¹"></a>æš´éœ²å­ç»„ä»¶çš„ DOM èŠ‚ç‚¹</h2><p>æŸäº›ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­è·å–åˆ°å­ç»„ä»¶çš„æŸä¸ªDOMèŠ‚ç‚¹ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡ Refs çš„è·å–æ–¹å¼è·å–åˆ°çš„ä¸€èˆ¬æ˜¯ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œå¦‚æœä»…ä»…æ˜¯å¸Œæœ›è·å–åˆ°å­ç»„ä»¶çš„ DOM èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ <code>React.forwardRef</code> å°†ä¼šå¸®ä¸Šä½ çš„å¿™ï¼Œå‰ææ˜¯éœ€è¦åœ¨ 16.3 ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚ç”šè‡³æ­é… <code>useImperativeMethods</code> å°†ä¼šæ›´å®Œç¾ã€‚è¯¦è§å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="">React çš„ Refs è½¬å‘ React.forwardRef</a> ã€‚</p><p>ä»¥ä¸Šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å¸¸è§„çš„ React æ•°æ®æµä¸­ï¼Œprops æ˜¯çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ã€‚è¦ä¿®æ”¹å­å…ƒç´ ï¼Œä½ éœ€è¦ç”¨æ–°çš„ props å»é‡æ–°æ¸²æŸ“å­å…ƒç´ ã€‚ç„¶è€Œï¼Œåœ¨å°‘æ•°æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å¸¸è§„æ•°æ®æµå¤–å¼ºåˆ¶ä¿®æ”¹å­å…ƒç´ ã€‚è¢«ä¿®æ”¹çš„å­å…ƒç´ å¯ä»¥æ˜¯ React ç»„ä»¶å®ä¾‹ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact æä¾›äº†è§£å†³åŠæ³•ã€‚æ–‡ç« ä¸­ä¼šè®²åˆ° &lt;code&gt;React.useRef&lt;/code&gt;ã€&lt;code&gt;React.createRef&lt;/code&gt;ã€&lt;code&gt;React.forwardRef&lt;/code&gt;ã€&lt;code&gt;å›è°ƒ Refs&lt;/code&gt; ç›¸å…³çŸ¥è¯†ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
      <category term="React" scheme="https://tianxiaohu.online/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>URL.createObjectURL å®ç°æœ¬åœ°å›¾ç‰‡é¢„è§ˆ</title>
    <link href="https://tianxiaohu.online/2020/04/05/front-end/javascript/image-preview/"/>
    <id>https://tianxiaohu.online/2020/04/05/front-end/javascript/image-preview/</id>
    <published>2020-04-05T23:30:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬åœ°å›¾ç‰‡é¢„è§ˆåº”è¯¥ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„éœ€æ±‚ï¼Œæ— éœ€ä¾èµ–æœåŠ¡ç«¯è¿”å›å›¾ç‰‡çš„åœ°å€ï¼Œå‰ç«¯å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°é¢„è§ˆå›¾ç‰‡ã€‚<br> <a id="more"></a></p><p>æœ¬åœ°å›¾ç‰‡é¢„è§ˆåº”è¯¥ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„éœ€æ±‚ï¼Œæ— éœ€ä¾èµ–æœåŠ¡ç«¯è¿”å›å›¾ç‰‡çš„åœ°å€ï¼Œå‰ç«¯å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°é¢„è§ˆå›¾ç‰‡ã€‚æ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ä½¿ç”¨ HTML5 çš„ FileReader API æ¥å®ç°ï¼Œä½†æ˜¯ä»Šå¤©æˆ‘ä»¬ä»‹ç»å¦å¤–ä¸€ç§å®ç°æ–¹å¼ã€‚ä½¿ç”¨ URL.createObjectURL æ¥å®ç°ã€‚</p><h2 id="ä½•ä¸º-createObjectURL"><a href="#ä½•ä¸º-createObjectURL" class="headerlink" title="ä½•ä¸º createObjectURL"></a>ä½•ä¸º createObjectURL</h2><p><code>URL.createObjectURL()</code> é™æ€æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª <code>DOMString</code>ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªè¡¨ç¤ºå‚æ•°ä¸­ç»™å‡ºçš„å¯¹è±¡çš„URLã€‚è¿™ä¸ª URL çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆ›å»ºå®ƒçš„çª—å£ä¸­çš„ document ç»‘å®šã€‚è¿™ä¸ªæ–°çš„URL å¯¹è±¡è¡¨ç¤ºæŒ‡å®šçš„ <code>File</code> å¯¹è±¡æˆ– <code>Blob</code> å¯¹è±¡ã€‚</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objectURL = URL.createObjectURL(object);</span><br></pre></td></tr></table></figure><p>objectï¼šç”¨äºåˆ›å»º URL çš„ File å¯¹è±¡ã€Blob å¯¹è±¡æˆ–è€… MediaSource å¯¹è±¡ã€‚â€‹</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç éƒ½æ˜¯ç²¾ç®€è¿‡çš„ä»£ç ï¼ŒåªåŒ…å«å…³é”®éƒ¨åˆ†ã€‚å®é™…é¡¹ç›®ä¸­ä½¿ç”¨å¯ä»¥ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„æ–¹å¼å°è£…ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„å¤ç”¨æ€§ã€‚</p><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./image-previewer.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ–‡ä»¶é€‰æ‹©--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ˜¾ç¤ºé¢„è§ˆçš„å›¾ç‰‡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">    imgPreviewer();  </span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>image-previewer.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">imgPreviewer</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'file'</span>).onchange = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">'file'</span>).files[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> createObjectURL = <span class="function"><span class="keyword">function</span> (<span class="params">blob</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">window</span>[<span class="built_in">window</span>.webkitURL ? <span class="string">'webkitURL'</span> : <span class="string">'URL'</span>][<span class="string">'createObjectURL'</span>](blob);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> imgDta = createObjectURL(ele);</span><br><span class="line">    <span class="keyword">var</span> pvImg = <span class="keyword">new</span> Image();</span><br><span class="line">    pvImg.src = imgDta;</span><br><span class="line">    pvImg.setAttribute(<span class="string">'id'</span>, <span class="string">'previewImg'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>).innerHTML = <span class="string">''</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>).appendChild(pvImg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä»£ç çš„å…³é”®éƒ¨åˆ†ï¼Œåªä¿ç•™çš„ç²¾ç®€çš„é€»è¾‘ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æ—¶å€™ï¼Œéœ€è¦å¢åŠ ä¸€äº›å®¹é”™çš„åˆ¤æ–­ï¼Œæ¯”å¦‚æ–‡ä»¶çš„åç¼€ååˆ¤æ–­ï¼Œæˆ–è€…æ–‡ä»¶å¤§å°çš„é™åˆ¶ç­‰ç­‰ã€‚å¤§å®¶è‡ªè¡Œè¡¥å…¨å³å¯ã€‚</p><p>æ–‡ä»¶æœ¬åœ°é¢„è§ˆè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒæ–¹ä¾¿çš„ API å°±æ˜¯ <code>FileReader</code>ï¼Œå¤§å®¶å¯ä»¥å»çœ‹ä¸‹ï¼Œä½¿ç”¨ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬åœ°å›¾ç‰‡é¢„è§ˆåº”è¯¥ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„éœ€æ±‚ï¼Œæ— éœ€ä¾èµ–æœåŠ¡ç«¯è¿”å›å›¾ç‰‡çš„åœ°å€ï¼Œå‰ç«¯å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°é¢„è§ˆå›¾ç‰‡ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¸ºå·²ç»å®‰è£…å¥½çš„ Nginx æ·»åŠ  SSL æ¨¡å—</title>
    <link href="https://tianxiaohu.online/2020/03/21/server-end/nginx/nginx-add-ssl-module/"/>
    <id>https://tianxiaohu.online/2020/03/21/server-end/nginx/nginx-add-ssl-module/</id>
    <published>2020-03-21T20:36:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€èˆ¬åœ¨é»˜è®¤å®‰è£… Nginx çš„æ—¶å€™ï¼Œ<code>http_ssl_module</code> æ¨¡å—ä¸€èˆ¬æ˜¯ä¸ä¼šå®‰è£…çš„ã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦åœ¨ Nginx ä¸­é…ç½® SSL çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯å¿…é¡»è¦å®‰è£…çš„ã€‚å¦‚æœé…ç½® SSL çš„æ—¶å€™ä¹‹å‰æ²¡æœ‰å®‰è£…è¿‡è¿™ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆä¸éœ€è¦é‡è£… Nginxï¼Œä¹Ÿæ˜¯æœ‰åŠæ³•é…ç½®è¿™ä¸ªæ¨¡å—çš„ã€‚æ¥ä¸‹æ¥å°±æ¥è®²è®²æ€ä¹ˆåœ¨å·²ç»å®‰è£…å®Œçš„ Nginx ä¸­æ·»åŠ  <code>http_ssl_module</code> æ¨¡å—ã€‚</p><a id="more"></a><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><p>åœ¨å¼€å§‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿ä½ å·²ç»çŸ¥é“ä½ çš„ Nginx çš„ä¸€äº›é…ç½®ä¿¡æ¯ã€‚æ¯”å¦‚å®‰è£…ç›®å½•ã€å®‰è£…åŒ…æ‰€åœ¨ç›®å½•ã€‚ä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±çš„è·¯å¾„ï¼š</p><ul><li>Nginx ç‰ˆæœ¬ï¼š<strong>1.12.0</strong></li><li>Nginx å®‰è£…åŒ…ç›®å½•ï¼š<strong>/home/gym/data/nginx/nginx-1.12.0</strong></li><li>Nginx å®‰è£…è·¯å¾„ï¼š<strong>/usr/local/nginx</strong></li></ul><h3 id="æ£€æŸ¥è‡ªå·±-Nginx-ç‰ˆæœ¬ä»¥åŠç¼–è¯‘ä¿¡æ¯"><a href="#æ£€æŸ¥è‡ªå·±-Nginx-ç‰ˆæœ¬ä»¥åŠç¼–è¯‘ä¿¡æ¯" class="headerlink" title="æ£€æŸ¥è‡ªå·± Nginx ç‰ˆæœ¬ä»¥åŠç¼–è¯‘ä¿¡æ¯"></a>æ£€æŸ¥è‡ªå·± Nginx ç‰ˆæœ¬ä»¥åŠç¼–è¯‘ä¿¡æ¯</h3><p>é¦–å…ˆè¿è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹è‡ªå·± Nginx çš„ç¼–è¯‘ä¿¡æ¯ã€‚å‰è¾¹çš„ <code>/usr/local/nginx</code> å°±æ˜¯ä½ æœ¬åœ° Nginx <strong>å®‰è£…ç›®å½•</strong></p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure><p>ç„¶åä½ ä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„ä¿¡æ¯ï¼š</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx version: nginx/1.12.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) </span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¿¡æ¯ç€é‡æ³¨æ„ï¼š<code>--prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</code> è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ Nginx çš„ç¼–è¯‘æ—¶å€™çš„å‚æ•°ã€‚</p><p>å› ä¸ºæˆ‘å·²ç»å®‰è£…è¿‡äº† <code>http_ssl_module</code> æ¨¡å—ï¼Œæ‰€ä»¥ <code>configure arguments</code> ä¸­å·²ç»æœ‰äº†ã€‚</p><h3 id="è¿›å…¥-Nginx-å®‰è£…ç›®å½•"><a href="#è¿›å…¥-Nginx-å®‰è£…ç›®å½•" class="headerlink" title="è¿›å…¥ Nginx å®‰è£…ç›®å½•"></a>è¿›å…¥ Nginx å®‰è£…ç›®å½•</h3><p>é€šè¿‡å‘½ä»¤è¿›å…¥åˆ°è‡ªå·± Nginx çš„å®‰è£…åŒ…çš„ç›®å½•ï¼Œï¼ˆæ³¨æ„è¿™ä¸ªç›®å½•æ˜¯ä½ è‡ªå·±æœºå™¨ä¸Šçš„å®‰è£…ç›®å½•ï¼‰</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /home/gym/data/nginx/nginx-1.12.0</span><br></pre></td></tr></table></figure><h3 id="é‡æ–°ç¼–è¯‘-Nginx"><a href="#é‡æ–°ç¼–è¯‘-Nginx" class="headerlink" title="é‡æ–°ç¼–è¯‘ Nginx"></a>é‡æ–°ç¼–è¯‘ Nginx</h3><p>åœ¨ Nginx çš„å®‰è£…ç›®å½•é‡Œé¢ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚<code>--prefix</code> æ˜¯ä»£è¡¨çš„ Nginx çš„å®‰è£…ç›®å½•ï¼Œåé¢çš„ <code>--with-</code> æ˜¯ä»£è¡¨çš„ç›®å‰çš„ç¼–è¯‘å‚æ•°ã€‚ä»¥å‰çš„å‚æ•°è¦è®°å¾—å¤åˆ¶ä¸‹æ¥ï¼Œç„¶ååœ¨è¿™ä¸ªå‚æ•°åŸºç¡€ä¸Šå¢åŠ  ssl æ¨¡å—éœ€è¦çš„å‚æ•° <code>--with-http_ssl_module</code> </p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</span><br></pre></td></tr></table></figure><h3 id="make-ç¼–è¯‘"><a href="#make-ç¼–è¯‘" class="headerlink" title="make ç¼–è¯‘"></a>make ç¼–è¯‘</h3><p>æ‰§è¡Œ make å‘½ä»¤ç¼–è¯‘ Nginxï¼Œmake å®Œä¹‹ååœ¨ objs ç›®å½•ä¸‹å°±å¤šäº†ä¸ª nginxã€‚è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬æ–°çš„ Nginx ç¨‹åºã€‚</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure><h3 id="å¤‡ä»½åŸ-Nginxï¼Œç”¨åˆšç”Ÿæˆçš„è¦†ç›–è€çš„"><a href="#å¤‡ä»½åŸ-Nginxï¼Œç”¨åˆšç”Ÿæˆçš„è¦†ç›–è€çš„" class="headerlink" title="å¤‡ä»½åŸ Nginxï¼Œç”¨åˆšç”Ÿæˆçš„è¦†ç›–è€çš„"></a>å¤‡ä»½åŸ Nginxï¼Œç”¨åˆšç”Ÿæˆçš„è¦†ç›–è€çš„</h3><blockquote><p>æ³¨ï¼š è™½ç„¶è¿™é‡Œçš„å¤‡ä»½ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯å¼ºçƒˆå»ºè®®å¤‡ä»½ã€‚è¿™æ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚</p></blockquote><p>å¤åˆ¶åŸæ¥çš„ Nginx ä½œä¸ºå¤‡ä»½ã€‚</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak</span><br></pre></td></tr></table></figure><p>ç”¨ä¸Šä¸ªæ­¥éª¤ç”Ÿæˆçš„æ–°çš„ Nginx ç¨‹åºè¦†ç›–è€çš„ã€‚<strong>è¦†ç›–ä¹‹å‰è¯·å…ˆåœæ‰ä½ çš„ Nginx æœåŠ¡</strong>ã€‚</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp objs/nginx /usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯é…ç½®æ˜¯å¦æ­£å¸¸"><a href="#éªŒè¯é…ç½®æ˜¯å¦æ­£å¸¸" class="headerlink" title="éªŒè¯é…ç½®æ˜¯å¦æ­£å¸¸"></a>éªŒè¯é…ç½®æ˜¯å¦æ­£å¸¸</h3><p>æ“ä½œå®Œä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬çš„ Nginx å°±å·²ç»é‡æ–°ç¼–è¯‘å¥½äº†ï¼Œå¹¶ä¸”å¢åŠ äº† <code>http_ssl_module</code> æ¨¡å—ã€‚ä¸è¿‡è¿˜æ˜¯è¦éªŒè¯ä¸‹é…ç½®æ˜¯å¦æ­£å¸¸ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -t</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿”å›çš„æ˜¯å¦‚ä¸‹ä¿¡æ¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼š</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</span><br></pre></td></tr></table></figure><h3 id="é‡å¯ä½ çš„-Nginx"><a href="#é‡å¯ä½ çš„-Nginx" class="headerlink" title="é‡å¯ä½ çš„ Nginx"></a>é‡å¯ä½ çš„ Nginx</h3><p>é‡æ–°å¯åŠ¨ä½ çš„ Nginxï¼Œæ£€æŸ¥é…ç½®çš„ <code>http_ssl_module</code> æ˜¯å¦å·²ç»ç”Ÿæ•ˆã€‚</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin</span><br><span class="line">./nginx</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ Nginx ä¿¡æ¯</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çœ‹åˆ°ç¼–è¯‘å‚æ•°é‡Œé¢å·²ç»å¢åŠ äº† <code>http_ssl_module</code> æ¨¡å—ï¼Œé‚£å°±æå®šäº†ã€‚</p><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx version: nginx/1.12.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) </span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šï¼Œæå®šï¼ å¦‚æœå¸®åˆ°ä½ ï¼Œè€æ¿ï¼å³ä¸‹è§’èµä¸€ä¸ªï¼ŸğŸ˜</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€èˆ¬åœ¨é»˜è®¤å®‰è£… Nginx çš„æ—¶å€™ï¼Œ&lt;code&gt;http_ssl_module&lt;/code&gt; æ¨¡å—ä¸€èˆ¬æ˜¯ä¸ä¼šå®‰è£…çš„ã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦åœ¨ Nginx ä¸­é…ç½® SSL çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯å¿…é¡»è¦å®‰è£…çš„ã€‚å¦‚æœé…ç½® SSL çš„æ—¶å€™ä¹‹å‰æ²¡æœ‰å®‰è£…è¿‡è¿™ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆä¸éœ€è¦é‡è£… Nginxï¼Œä¹Ÿæ˜¯æœ‰åŠæ³•é…ç½®è¿™ä¸ªæ¨¡å—çš„ã€‚æ¥ä¸‹æ¥å°±æ¥è®²è®²æ€ä¹ˆåœ¨å·²ç»å®‰è£…å®Œçš„ Nginx ä¸­æ·»åŠ  &lt;code&gt;http_ssl_module&lt;/code&gt; æ¨¡å—ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="æœåŠ¡ç«¯" scheme="https://tianxiaohu.online/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
      <category term="Nginx" scheme="https://tianxiaohu.online/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>Nginx + SSL é…ç½®å®ç° https è®¿é—®</title>
    <link href="https://tianxiaohu.online/2020/03/19/server-end/nginx/nginx-https/"/>
    <id>https://tianxiaohu.online/2020/03/19/server-end/nginx/nginx-https/</id>
    <published>2020-03-19T00:36:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ Nginx æ¥é…ç½® SSLï¼Œå¼€å¯æ¥å£çš„ https è°ƒç”¨ã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¸®å¾—ä¸Šå¿™ã€‚</p><a id="more"></a><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æ¥¼ä¸»å‰é˜µå­å†™å°ç¨‹åºï¼Œæ¥å£åœ¨ Http ç¯å¢ƒæµ‹è¯•é€šè¿‡ï¼ŒäºŒçº§åŸŸåè§£æå®Œæ¯•ï¼ŒIPæ˜ å°„å®Œæ¯•ï¼Œå¿ƒæƒ³ä¸‡äº‹å¤§å‰ï¼Œå‘å¸ƒä¸Šçº¿ã€‚è°æ–™å¿˜è®°äº†å°ç¨‹åºç”Ÿäº§ç¯å¢ƒæ¥å£å¿…é¡»ä½¿ç”¨ Https åè®®ã€‚ç™¾å¯†ä¸€ç–â€¦ çœ‹æ¥åªèƒ½å¹²å¹²è¿ç»´çš„æ´»å„¿äº†ã€‚è™½ç„¶æœ€åæå®šäº†ï¼Œä¸è¿‡è¿˜æ˜¯è¸©äº†äº›å‘çš„ï¼Œè®°å½•ä¸‹ã€‚</p><p>æ‰€ä»¥ä»Šå¤©è¦å®ç°åŠŸèƒ½å°±æ˜¯é€šè¿‡æˆ‘çš„äºŒçº§åŸŸå <code>https://api.tianxiaohu.online</code> æ¥è®¿é—®æœåŠ¡å™¨æ¥å£ã€‚</p><h3 id="ä½ éœ€è¦å‡†å¤‡ï¼š"><a href="#ä½ éœ€è¦å‡†å¤‡ï¼š" class="headerlink" title="ä½ éœ€è¦å‡†å¤‡ï¼š"></a>ä½ éœ€è¦å‡†å¤‡ï¼š</h3><p>è¿™éƒ¨åˆ†ä¸æ˜¯ä¸»è¦çš„ï¼Œæ‰€ä»¥éœ€è¦ä½ è‡ªè¡Œæå®šï¼Œ</p><blockquote><p>Â· åŸŸåï¼ˆæ¥¼ä¸»åŸŸåé˜¿é‡Œäº‘ä¹°çš„ï¼‰<br>Â· å°†åŸŸåè§£æåˆ°ä¸»æœºIP<br>Â· æœåŠ¡å™¨å®‰è£…å¥½ Nginx ç¯å¢ƒï¼ˆå®‰è£…æ—¶åŠ¡å¿…å®‰è£…sslæ¨¡å— â€“with-http_ssl_moduleï¼Œå¾ˆç®€å•ï¼Œä¸ä¼šçš„è‡ªè¡ŒGoogleï¼‰</p></blockquote><h3 id="ä¸ºä½ çš„åŸŸåç”³è¯·-SSL-è¯ä¹¦"><a href="#ä¸ºä½ çš„åŸŸåç”³è¯·-SSL-è¯ä¹¦" class="headerlink" title="ä¸ºä½ çš„åŸŸåç”³è¯· SSL è¯ä¹¦"></a>ä¸ºä½ çš„åŸŸåç”³è¯· SSL è¯ä¹¦</h3><p>ä¸ºåŸŸåç”³è¯· SSL è¯ä¹¦å…¶å®å¹¶ä¸å¤æ‚ã€‚æ€»æ‰€å‘¨çŸ¥ï¼Œå¤§éƒ¨åˆ†çš„è¯ä¹¦æä¾›å•†æ˜¯éœ€è¦æ”¶è´¹çš„ï¼Œä¾¿å®œçš„ä¹Ÿå¾—åƒæŠŠå—ä¸€å¹´ã€‚å¯¹äºæ™®é€šä¸ªäººå¼€å‘è€…è€Œè¨€ç¡®å®æ˜¯ä¸€ç¬”ä¸å°çš„å¼€æ”¯ã€‚å½“ç„¶äº†ï¼Œå…è´¹çš„è¯ä¹¦ä¹Ÿä¸æ˜¯æ²¡æœ‰ï¼Œæ— éå°±æ˜¯å®‰å…¨æ€§å’Œç¨³å®šæ€§ä¸å¦‚æ”¶è´¹çš„ã€‚å…¶å®å¹³æ—¶ä¸ªäººä½¿ç”¨è¿˜æ˜¯å®Œå…¨å¯ä»¥ cover çš„ã€‚<br>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘ï¼Œé‚£ä¹ˆåœ¨é˜¿é‡Œäº‘ä¸Šå°±æœ‰å…è´¹çš„è¯ä¹¦å¯ä»¥<a href="https://common-buy.aliyun.com/?spm=5176.2020520163.c1583915649459.d1583915649459_0.d94056a7EtHbw3.d94056a7EtHbw3&commodityCode=cas#/buy" target="_blank" rel="noopener">è´­ä¹°</a>ã€‚è´­ä¹°å®Œï¼ŒæŒ‰ç…§é˜¿é‡Œäº‘çš„ä½¿ç”¨æ–‡æ¡£ï¼Œä¸ºè‡ªå·±çš„åŸŸåç”³è¯·è¯ä¹¦å°±okäº†ï¼Œä¸èµ˜è¿°~</p><h3 id="é…ç½®-Nginx"><a href="#é…ç½®-Nginx" class="headerlink" title="é…ç½® Nginx"></a>é…ç½® Nginx</h3><p>å› ä¸ºä¹‹å‰ä½ å·²ç»åŸŸåè§£æåˆ°äº†ä½ çš„ä¸»æœºIPï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ Nginx å¸®æˆ‘åšçš„äº‹æƒ…å°±æ˜¯ç›‘å¬æœåŠ¡å™¨çš„443ç«¯å£ï¼Œç„¶åè½¬å‘åˆ°ä¸»æœºçš„æ¥å£æœåŠ¡ä¸Šã€‚ä»è€Œå®ç°é€šè¿‡httpsè®¿é—®æ¥å£ã€‚Nginxå…·ä½“çš„å®‰è£…é…ç½®ä¹Ÿä¸è¿‡å¤šæè¿°ï¼ŒæŒ‰ç…§æ–‡æ¡£æ¥å°±å¥½ï¼Œç›¸ä¿¡ä¸ä¼šéš¾å€’å¤§å®¶ï¼Œè¿™é‡Œåªè¯´ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„æƒ…å†µï¼Œå°±æ˜¯æ­¤å‰å·²ç»å®‰è£…å¥½äº†Nginxï¼Œä½†æ˜¯å¹¶æ²¡æœ‰é™„å¸¦å®‰è£…SSLåŒ…ã€‚</p><p>è¿™ç§æƒ…å†µæ˜¯æœ‰åŠæ³•è§£å†³çš„ï¼Œå¯ä»¥åœ¨ä¸å¸è½½ Nginx çš„æƒ…å†µä¸‹å®ŒæˆSSLåŒ…çš„é…ç½®ã€‚è¯¦ç»†è¯·çœ‹<a href="/2020/03/21/server-end/nginx/nginx-add-ssl-module">ã€Šå¦‚ä½•ä¸ºå·²ç»å®‰è£…å¥½çš„ Nginx æ·»åŠ  SSL æ¨¡å—ã€‹</a></p><p>å¼€å§‹å‰å…ˆè¯´æ˜ä¸‹æ¥¼ä¸»çš„ç¯å¢ƒæƒ…å†µï¼ˆä¸åŒç¯å¢ƒå¯èƒ½æ“ä½œæœ‰å·®å¼‚ï¼‰ï¼š</p><blockquote><p>Â· æœåŠ¡å™¨ï¼šCentOS 7.x<br>Â· æœ¬åœ°æœºå™¨ï¼šMacBook Pro<br>Â· Nginx ç‰ˆæœ¬ï¼š1.12.0<br>Â· Nginx å®‰è£…ç›®å½•ï¼š/usr/local/nginx</p></blockquote><h4 id="1-ä¸‹è½½-SSL-è¯ä¹¦ï¼Œå­˜æ”¾åˆ°æœåŠ¡å™¨"><a href="#1-ä¸‹è½½-SSL-è¯ä¹¦ï¼Œå­˜æ”¾åˆ°æœåŠ¡å™¨" class="headerlink" title="1. ä¸‹è½½ SSL è¯ä¹¦ï¼Œå­˜æ”¾åˆ°æœåŠ¡å™¨"></a>1. ä¸‹è½½ SSL è¯ä¹¦ï¼Œå­˜æ”¾åˆ°æœåŠ¡å™¨</h4><p>å¦‚æœä½ çš„åŸŸå https å·²ç»å¼€é€šï¼Œé‚£ä¹ˆåœ¨å¯¹åº”çš„å¹³å°ï¼ˆæˆ‘çš„æ˜¯é˜¿é‡Œäº‘ï¼‰å»ä¸‹è½½è¯ä¹¦æ–‡ä»¶ã€‚åœ¨ä¸‹è½½çš„æ—¶å€™è¦æ³¨æ„é€‰æ‹©å¯¹åº”çš„æœåŠ¡å™¨ç±»å‹ã€‚æœ‰ Tomcatã€Apacheã€IISã€Nginxç­‰ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£Nginxï¼Œæ‰€ä»¥é€‰æ‹©ä¸‹è½½Nginxå¯¹åº”çš„è¯ä¹¦æ–‡ä»¶åˆ°ä½ æœ¬åœ°ã€‚</p><p>ä¸‹è½½åä½ ä¼šå¾—åˆ°ä¸¤ä¸ªè¯ä¹¦æ–‡ä»¶ï¼Œå‡è®¾ä¸º <code>cert.pem</code> å’Œ <code>cert.key</code>ã€‚æ¥¼ä¸»å­˜æ”¾åˆ°æœ¬åœ° <code>/Users/Toy/ssl</code> ç›®å½•ã€‚</p><h4 id="2-å°†è¯ä¹¦æ–‡ä»¶æ¨é€åˆ°æœåŠ¡å™¨"><a href="#2-å°†è¯ä¹¦æ–‡ä»¶æ¨é€åˆ°æœåŠ¡å™¨" class="headerlink" title="2. å°†è¯ä¹¦æ–‡ä»¶æ¨é€åˆ°æœåŠ¡å™¨"></a>2. å°†è¯ä¹¦æ–‡ä»¶æ¨é€åˆ°æœåŠ¡å™¨</h4><p>ä¸‹è½½å¥½çš„è¯ä¹¦éœ€è¦æ”¾ç½®åˆ°æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥è‡ªå·±æ‰¾ä¸ªç›®å½•å­˜æ”¾ã€‚æ¥¼ä¸»è¿™é‡Œæ”¾åˆ°Nginxçš„å®‰è£…ç›®å½•é‡Œ <code>/usr/local/nginx/cert/ssl</code>ã€‚</p><p>åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•ï¼ˆç›®å½•å¯è‡ªé€‰ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;nginx</span><br><span class="line">mkdir cert</span><br><span class="line">cd cert&#x2F;</span><br><span class="line">mkdir ssl</span><br></pre></td></tr></table></figure><p>æ¨é€æœ¬åœ°è¯ä¹¦æ–‡ä»¶è‡³æœåŠ¡å™¨æ–°åˆ›å»ºçš„ç›®å½•ï¼š</p><p>æ¨é€æ–¹æ³•æ¯”è¾ƒå¤šï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨FTPç›´æ¥ä¸Šä¼ ï¼Œä¸è¿‡éœ€è¦å…ˆåœ¨æœåŠ¡å™¨ä¸Šé…ç½®å¥½FTPã€‚æ¥¼ä¸»æ¯”è¾ƒå–œæ¬¢ç®€å•çš„ SCP å‘½ä»¤ï¼Œå°±æ˜¯secure copyï¼Œæ˜¯ç”¨æ¥è¿›è¡Œè¿œç¨‹æ–‡ä»¶æ‹·è´çš„ã€‚æ•°æ®ä¼ è¾“ä½¿ç”¨ sshï¼Œå¹¶ä¸”å’Œssh ä½¿ç”¨ç›¸åŒçš„è®¤è¯æ–¹å¼ï¼Œæä¾›ç›¸åŒçš„å®‰å…¨ä¿è¯ã€‚ </p><p>å‘½ä»¤æ ¼å¼ï¼š</p><blockquote><p>scp [å‚æ•°] &lt;æºåœ°å€ï¼ˆç”¨æˆ·å@IPåœ°å€æˆ–ä¸»æœºåï¼‰&gt;:&lt;æ–‡ä»¶è·¯å¾„&gt; &lt;ç›®çš„åœ°å€ï¼ˆç”¨æˆ·å @IP åœ°å€æˆ–ä¸»æœºåï¼‰&gt;:&lt;æ–‡ä»¶è·¯å¾„&gt; </p></blockquote><p>æ‰¾åˆ°ä¹‹å‰æœ¬åœ°å­˜æ”¾è¯ä¹¦çš„ç›®å½• <code>/Users/Toy/ssl</code>ï¼Œç„¶ååœ¨ç»ˆç«¯æ‰§è¡Œè„šæœ¬ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp &#x2F;Users&#x2F;Toy&#x2F;ssl&#x2F;cert.pem root@123.123.123.123:&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;cert&#x2F;ssl&#x2F;cert.pem</span><br><span class="line">scp &#x2F;Users&#x2F;Toy&#x2F;ssl&#x2F;cert.key root@123.123.123.123:&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;cert&#x2F;ssl&#x2F;cert.key</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸¤æ¡å‘½ä»¤å³å¯æå®šã€‚</p><h4 id="2-å¼€æ”¾-443ã€80-ç«¯å£"><a href="#2-å¼€æ”¾-443ã€80-ç«¯å£" class="headerlink" title="2. å¼€æ”¾ 443ã€80 ç«¯å£"></a>2. å¼€æ”¾ 443ã€80 ç«¯å£</h4><p>å¼€æ”¾ç«¯å£æ–¹æ³•ä¹Ÿå¾ˆå¤šï¼Œå¦‚æœå›¾çœäº‹ï¼Œå¯ä»¥ç›´æ¥åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„å®‰å…¨ç»„é‡Œé¢å¼€æ”¾443ç«¯å£æˆ–è€…80ç«¯å£ã€‚ï¼ˆæ­¤æ–¹æ³•å¼€å¯åè®°å¾—é‡å¯æœåŠ¡å™¨ï¼Œæ¥¼ä¸»å¼€å§‹ä¹Ÿæ˜¯é€šè¿‡æ­¤æ–¹æ³•å¼€å¯ï¼Œç„¶åä¸€ç›´ä¸ç”Ÿæ•ˆï¼Œå‘äº†æˆ‘2ä¸ªå°æ—¶ğŸ˜“ï¼‰</p><p>å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; å¯åŠ¨é˜²ç«å¢™</span><br><span class="line">systemctl start firewalld.service</span><br><span class="line">&#x2F;&#x2F; å¼€å¯ç«¯å£</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;443&#x2F;tcp --permanent</span><br><span class="line">&#x2F;&#x2F; é‡å¯é˜²ç«å¢™</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h4 id="3-ç¼–è¾‘-nginx-conf-æ–‡ä»¶ï¼Œé…ç½®-SSL-è§„åˆ™"><a href="#3-ç¼–è¾‘-nginx-conf-æ–‡ä»¶ï¼Œé…ç½®-SSL-è§„åˆ™" class="headerlink" title="3. ç¼–è¾‘ nginx.conf æ–‡ä»¶ï¼Œé…ç½® SSL è§„åˆ™"></a>3. ç¼–è¾‘ nginx.conf æ–‡ä»¶ï¼Œé…ç½® SSL è§„åˆ™</h4><p>ç¼–è¾‘ nginx.conf</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure><p>é…ç½®è½¬å‘è§„åˆ™</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    # åŒæ—¶ç›‘å¬443å’Œ80ç«¯å£</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    listen       <span class="number">443</span> ssl;</span><br><span class="line">    server_name  api.tianxiaohu.online;</span><br><span class="line">    # è¯ä¹¦ç›®å½•</span><br><span class="line">    ssl_certificate      /usr/local/nginx/cert/ssl/cert.pem;</span><br><span class="line">    ssl_certificate_key  /usr/local/nginx/cert/ssl/cert.key;</span><br><span class="line">    ssl_session_cache    shared:SSL:<span class="number">1</span>m;</span><br><span class="line">    ssl_session_timeout  <span class="number">5</span>m;</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers  on;</span><br><span class="line">    # è½¬å‘è§„åˆ™</span><br><span class="line">    location / &#123;</span><br><span class="line">        # æœåŠ¡å™¨æ¥å£åœ°å€</span><br><span class="line">        proxy_pass http:<span class="comment">//127.0.0.1:8080; </span></span><br><span class="line">        add_header Access-Control-Allow-Origin *;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯ Nginx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ï¼Œå¦‚æœæ“ä½œä¸å‡ºæ„å¤–ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å¼€å¿ƒçš„ä½¿ç”¨ https è®¿é—®æ¥å£äº†ã€‚è¦ä¸è¦ç‚¹ä¸ªå³ä¸‹è§’èµä¸€æ¯å’–å•¡ï¼ŸğŸ˜ƒ</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ Nginx æ¥é…ç½® SSLï¼Œå¼€å¯æ¥å£çš„ https è°ƒç”¨ã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¸®å¾—ä¸Šå¿™ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="æœåŠ¡ç«¯" scheme="https://tianxiaohu.online/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
      <category term="Nginx" scheme="https://tianxiaohu.online/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>CSSç§»åŠ¨ç«¯è‡ªé€‚åº”è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://tianxiaohu.online/2020/02/21/front-end/css/css-responsive/"/>
    <id>https://tianxiaohu.online/2020/02/21/front-end/css/css-responsive/</id>
    <published>2020-02-21T20:00:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>éƒ½è¯´å‰ç«¯å¼€å‘è‹¦é€¼ï¼Œä¸€å¤§åŸå› å°±æ˜¯æˆå¤©è¦é¢å¯¹åƒå˜ä¸‡åŒ–çš„æ‰‹æœºå±å¹•å°ºå¯¸ï¼Œè§£å†³æ•°ä¸å°½çš„å…¼å®¹æ€§é—®é¢˜ã€‚ç§»åŠ¨ç«¯å±å¹•CSSè‡ªé€‚åº”å°±æ˜¯ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œä»Šå¤©å°±å°†å¹³æ—¶å·¥ä½œä¸­é‡‡ç”¨çš„æ–¹æ¡ˆåˆ†äº«å‡ºæ¥ã€‚</p><a id="more"></a><p>å…¶å®å‰ç«¯åšCSSè‡ªé€‚åº”çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œè¿™æ¬¡ä»…ä»…ä»‹ç»ä¸€ç§åœ¨è‡ªå·±å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ¡ˆã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><h3 id="1-æ ¹èŠ‚ç‚¹font-sizeå¤„ç†é€»è¾‘ï¼š"><a href="#1-æ ¹èŠ‚ç‚¹font-sizeå¤„ç†é€»è¾‘ï¼š" class="headerlink" title="1. æ ¹èŠ‚ç‚¹font-sizeå¤„ç†é€»è¾‘ï¼š"></a>1. æ ¹èŠ‚ç‚¹<code>font-size</code>å¤„ç†é€»è¾‘ï¼š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">designWidth, maxWidth</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> doc = <span class="built_in">document</span>, win = <span class="built_in">window</span>, docEl = doc.documentElement, tid;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">refreshRem</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> width = docEl.getBoundingClientRect().width;</span><br><span class="line">    maxWidth = maxWidth || <span class="number">540</span>;</span><br><span class="line">    width &gt; maxWidth &amp;&amp; (width = maxWidth);</span><br><span class="line">    <span class="keyword">var</span> rem = (width * <span class="number">100</span>) / designWidth;</span><br><span class="line">    docEl.style.fontSize = rem + <span class="string">'px'</span>;</span><br><span class="line">    <span class="keyword">var</span> actualSize = <span class="built_in">parseFloat</span>(<span class="built_in">window</span>.getComputedStyle(<span class="built_in">document</span>.documentElement)[<span class="string">'font-size'</span>]);</span><br><span class="line">    <span class="keyword">if</span> (actualSize !== rem &amp;&amp; actualSize &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Math</span>.abs(actualSize - rem) &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> remScaled = rem * rem / actualSize;</span><br><span class="line">      docEl.style.fontSize = remScaled + <span class="string">'px'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  refreshRem();</span><br><span class="line">  win.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearTimeout(tid);</span><br><span class="line">    tid = setTimeout(refreshRem, <span class="number">300</span>);</span><br><span class="line">  &#125;, <span class="literal">false</span>);</span><br><span class="line">  win.addEventListener(<span class="string">'pageshow'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.persisted) &#123;</span><br><span class="line">      clearTimeout(tid);</span><br><span class="line">      tid = setTimeout(refreshRem, <span class="number">300</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">if</span> (doc.readyState === <span class="string">'complete'</span>) &#123;</span><br><span class="line">    doc.body.style.fontSize = <span class="string">'16px'</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    doc.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      doc.body.style.fontSize = <span class="string">'16px'</span>;</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="number">750</span>, <span class="number">750</span>);</span><br></pre></td></tr></table></figure><h3 id="2-åœ¨é¡µé¢å¼•å…¥"><a href="#2-åœ¨é¡µé¢å¼•å…¥" class="headerlink" title="2. åœ¨é¡µé¢å¼•å…¥"></a>2. åœ¨é¡µé¢å¼•å…¥</h3><p>å°†ä¸Šè¿°ä»£ç ç½®äºhtmlçš„ <code>&lt;head&gt;</code> æ ‡ç­¾ä¸­ï¼Œä¼˜å…ˆäºé¡µé¢çš„cssä»£ç åŠ è½½ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"><span class="comment">&lt;!-- æ­¤å¤„æ”¾ä¸Šé¢çš„ä»£ç  --&gt;</span></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸šåŠ¡cssä»£ç æ”¾åœ¨åé¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-ç¼–å†™cssä»£ç "><a href="#3-ç¼–å†™cssä»£ç " class="headerlink" title="3. ç¼–å†™cssä»£ç "></a>3. ç¼–å†™cssä»£ç </h3><p>é…ç½®å¥½åï¼Œåœ¨cssä»£ç ä¸­å°±å¯ä»¥ç”¨<code>rem</code>ä»£æ›¿<code>px</code>ï¼Œä¸€èˆ¬å¼€å‘ä¸­åŸºæœ¬éƒ½ä¼šä½¿ç”¨SASSæˆ–è€…LESSï¼Œæ‰€ä»¥å¯ä»¥å€ŸåŠ©å‡½æ•°æ¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘å·¥ä½œã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// å®šä¹‰å•ä½å¤„ç†å‡½æ•°</span><br><span class="line"><span class="keyword">@function</span> p($px) &#123;</span><br><span class="line">    <span class="keyword">@return</span> $px / <span class="number">100</span> * <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line">// å‡è®¾è®¾è®¡ç¨¿å®½åº¦20px</span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">P</span>(<span class="number">20</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æœ€åç¼–è¯‘æˆ</span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0.2rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•"><a href="#4-ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•" class="headerlink" title="4. ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•"></a>4. ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•</h3><p>å…¶å®ä¸éš¾å‘ç°ï¼Œè™½ç„¶SASSèƒ½å¤Ÿå‡è½»æˆ‘ä»¬å¾ˆå¤šçš„å¼€å‘è´Ÿæ‹…ï¼Œä½†æ˜¯æ¯æ¬¡å†™<code>p(20)</code>è¿™æ ·çš„ä»£ç è¿˜æ˜¯ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´ã€‚æœ‰æ²¡æœ‰ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•å‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚å¦‚æœä½ å¼€å‘ä¸­ä½¿ç”¨<code>Webpack</code>ä½œä¸ºæ„å»ºå·¥å…·ï¼Œé‚£ä¹ˆ<code>postcss-plugin-px2rem</code>æ’ä»¶ï¼ˆè¯¦è§ <a href="https://github.com/pigcan/postcss-plugin-px2rem" target="_blank" rel="noopener" title="æ’ä»¶æ–‡æ¡£">æ’ä»¶æ–‡æ¡£</a>)å°±ä¼šæ˜¯ä¸ªå¥½çš„é€‰æ‹©ã€‚è¿™æ ·ä½ å°±å¯ä»¥æ‘†è„±é¢‘ç¹å†™csså‡½æ•°çš„å›°æ‰°ï¼Œç›´æ¥æŒ‰ç…§è®¾è®¡ç¨¿æ ‡æ³¨çš„pxå€¼æ¥å†™å°±å¥½äº†ã€‚</p><p>webpack å¯ä»¥é…ç½®åœ¨å¯¹åº”sassæ–‡ä»¶çš„loaderé‡Œé¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> autoprefixer <span class="keyword">from</span> <span class="string">'autoprefixer'</span>;</span><br><span class="line"><span class="keyword">import</span> px2rem <span class="keyword">from</span> <span class="string">'postcss-plugin-px2rem'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®é¡¹</span></span><br><span class="line"><span class="keyword">const</span> px2remOption = &#123;</span><br><span class="line">  rootValue: <span class="number">100</span>,</span><br><span class="line">  unitPrecision: <span class="number">5</span>,</span><br><span class="line">  minPixelValue: <span class="number">0</span>,</span><br><span class="line">  ignoreIdentifier: <span class="string">'no'</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> postcssLoader = &#123;</span><br><span class="line">  loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">  query: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      autoprefixer(),</span><br><span class="line">      px2rem(px2remOption)</span><br><span class="line">    ],</span><br><span class="line">    minimize: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç®€åŒ–ç‰ˆwebpacké…ç½®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        loader: [<span class="string">'css-loader'</span>, postcssLoader, <span class="string">'sass-loader'</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œcssçš„å†™æ³•æ„Ÿè§‰åˆå›åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„æ ·å­ï¼Œwebpackä¼šå¸®æˆ‘ç¼–è¯‘æˆæˆ‘ä»¬éœ€è¦çš„remå•ä½ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 20pxå°±æ˜¯è®¾è®¡ç¨¿æ ‡æ³¨çš„å°ºå¯¸</span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯å·¥ä½œä¸­ç”¨åˆ°çš„ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆã€‚å¸Œæœ›å¯ä»¥å¸®åˆ°ä½ ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éƒ½è¯´å‰ç«¯å¼€å‘è‹¦é€¼ï¼Œä¸€å¤§åŸå› å°±æ˜¯æˆå¤©è¦é¢å¯¹åƒå˜ä¸‡åŒ–çš„æ‰‹æœºå±å¹•å°ºå¯¸ï¼Œè§£å†³æ•°ä¸å°½çš„å…¼å®¹æ€§é—®é¢˜ã€‚ç§»åŠ¨ç«¯å±å¹•CSSè‡ªé€‚åº”å°±æ˜¯ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œä»Šå¤©å°±å°†å¹³æ—¶å·¥ä½œä¸­é‡‡ç”¨çš„æ–¹æ¡ˆåˆ†äº«å‡ºæ¥ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="CSS" scheme="https://tianxiaohu.online/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>javascript å®šæ—¶å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„</title>
    <link href="https://tianxiaohu.online/2019/10/04/front-end/javascript/How-JavaScript-Timer-Work/"/>
    <id>https://tianxiaohu.online/2019/10/04/front-end/javascript/How-JavaScript-Timer-Work/</id>
    <published>2019-10-04T20:00:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>å…¶å®è¯´èµ·JavaScriptä¸­çš„å®šæ—¶å™¨(<em>Timer</em>)ä¸­çš„ <em>setTimeout()</em> æ–¹æ³•ï¼Œä»äº‹å¼€å‘çš„åŒå­¦æƒ³å¿…éƒ½ä¸ä¼šé™Œç”Ÿï¼Œè§‰å¾—è¿™äº›ä¸œè¥¿å¾ˆç®€å•å¾ˆåŸºç¡€ã€‚ä½†æ˜¯æœ‰æ—¶å€™æ°æ°æ˜¯åŸºç¡€ç®€å•çš„ä¸œè¥¿ï¼Œæ‰è¶Šå®¹æ˜“è¢«å¿½ç•¥ã€‚å…ˆçœ‹ä¸€æ®µä»£ç ï¼š<br> <a id="more"></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'world'</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€çœ¼çœ‹å‡ºäº†ç»“æœï¼Œé‚£ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹ï¼Œè¿™æ ·å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'world'</span>);</span><br><span class="line">&#125;, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„ä»…ä»£è¡¨æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶è¿ç®—ï¼Œè¿™é‡Œå‡è®¾æ—¶é—´å¤§äº1ç§’ï¼Œ</span></span><br><span class="line"><span class="comment">// ä¾¿äºç†è§£æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ­¤å¤„ä¸éœ€è¦è¿‡åˆ†æ¢ç©¶æ‰§è¡Œæ—¶é—´</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I am run'</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>);</span><br></pre></td></tr></table></figure><p>ä¸é€šè¿‡Consoleæ§åˆ¶å°è¿è¡Œï¼Œèƒ½ç¬¬ä¸€æ—¶é—´çŸ¥é“æ‰“å°çš„ç»“æœä¹ˆï¼Ÿå¦‚æœæœ‰ç‚¹ä¸ç¡®å®šï¼Œéªšå¹´ï¼Œç»§ç»­å¾€ä¸‹çœ‹å§ã€‚è¿™æ®µä»£ç ä»”ç»†ç ”ç©¶ä¸‹å…¶å®è¿˜æ˜¯è›®æœ‰ï¼ˆkengï¼‰è¶£ï¼ˆdieï¼‰çš„ã€‚ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¹Ÿæ˜¯Javascriptè¯­è¨€ç›¸æ¯”å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸ä¸¥è°¨çš„åœ°æ–¹ã€‚å½“ç„¶ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„é©¾é©­Javascriptè¿™é—¨ç¥å¥‡çš„è¯­è¨€ï¼Œè¿™äº›ä¸œè¥¿æ˜¯å¿…é¡»æŒæ¡çš„ã€‚</p><h2 id="JSä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„"><a href="#JSä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„" class="headerlink" title="JSä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„"></a>JSä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„</h2><p>é‚£é¦–å…ˆåº”è¯¥ä»JSä»£ç æ‰§è¡Œè¯´èµ·ï¼ŒJSå¼•æ“ä¼šåœ¨å†…å­˜ä¸­åˆ†é…å †åŒºï¼ˆheapï¼‰å’Œæ ˆåŒºï¼ˆstackï¼‰ï¼Œé‚£ä¹ˆJSåˆæ˜¯ä»¥æ€æ ·çš„é¡ºåºæ‰§è¡Œçš„å‘¢ï¼Ÿå…ˆçœ‹ä¸€æ®µå¾ˆç®€å•çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">    B(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newNum = num * num;</span><br><span class="line">    <span class="built_in">console</span>.log(newNum);</span><br><span class="line">&#125;</span><br><span class="line">A();</span><br></pre></td></tr></table></figure><p>å½“ä»£ç è¿è¡Œçš„æ—¶å€™ï¼Œä¸ºä¾¿äºç†è§£æˆ‘ä»¬å‡è®¾æ ˆåº•æœ‰ä¸€ä¸ªmain()æ–¹æ³•ï¼ˆç±»ä¼¼äºJavaä¸­çš„å…¥å£Mainæ–¹æ³•ï¼‰ä½œä¸ºè¿è¡Œçš„å¼€å§‹ã€‚</p><p>1.ä»£ç å¼€å§‹æ‰§è¡Œ</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/797e315861455afca7ba11e13d9cfa1a.png" alt="ç¬¬1æ­¥"></p><p>2.è¿è¡ŒA()æ–¹æ³•ï¼Œå°†A()å…¥æ ˆï¼Œæ­¤æ—¶Aä¸Šä¸‹æ–‡ä¸­å­˜åœ¨å˜é‡ a = 3</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/aefcc296c8a4d0b9f0b8fef7ffd59e13.png" alt="ç¬¬2æ­¥"></p><p>3.è°ƒç”¨B()æ–¹æ³•ï¼Œå°†B()å…¥æ ˆï¼Œæ­¤æ—¶Bä¸Šä¸‹æ–‡ä¸­å­˜åœ¨å˜é‡ num = 3ï¼ŒnewNum = 9</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/ad890e7e9f1ddde217319a4cce456b8a.png" alt="ç¬¬3æ­¥"></p><p>4.è°ƒç”¨B()æ–¹æ³•ä¸­çš„console.log()ï¼Œå…¥æ ˆï¼Œæ§åˆ¶å°æ‰“å° 9</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/69c0a4dcbe95361966a1b3d5aebe3793.png" alt="ç¬¬4æ­¥"></p><p>5.ç»§ç»­è¿è¡Œï¼Œä¾æ¬¡å°†console.log()ï¼Œå’ŒB()æ–¹æ³•å‡ºæ ˆ</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/6b6ec3ba7b90eb0ad2b1a514d2a6e4d5.png" alt="ç¬¬5æ­¥"></p><p>6.A()æ–¹æ³•è¿è¡Œå®Œæ¯•å‡ºæ ˆ</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/4ea0f6faf5bfd032ac7915432e614eb8.png" alt="ç¬¬6æ­¥"></p><p>7.ä»£ç è¿è¡Œå®Œæˆï¼Œæ¸…ç©ºæ ˆ</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/14/a68daa08f4a97c0f28ec4e6d4ca0bc7d.png" alt="ç¬¬7æ­¥"></p><p>è¿™å°±æ˜¯ä¸€æ®µç®€å•çš„ä»£ç åœ¨å †æ ˆä¸­çš„æ‰§è¡Œæƒ…å†µï¼Œçœ‹æ˜ç™½äº†å°±èƒ½å¼€å§‹ä»‹ç»Javascriptå¼•æ“çš„å¦å¤–ä¸€ä¸ªæœºåˆ¶ã€‚</p><h2 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<strong>Javascriptå¼•æ“</strong>ï¼ˆä»¥ä¸‹ç®€ç§°<em>JSå¼•æ“</em>ï¼‰æ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨æŸä¸€ä¸ªç‰¹å®šçš„æ—¶é—´å†…åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶é˜»å¡å…¶ä»–ä»»åŠ¡çš„æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›ä»»åŠ¡æ˜¯ä¸²è¡Œçš„ã€‚è¿™æ ·çš„è¯ï¼Œç”¨æˆ·ä¸å¾—ä¸ç­‰å¾…ä¸€ä¸ªè€—æ—¶çš„æ“ä½œå®Œæˆä¹‹åæ‰èƒ½è¿›è¡Œåé¢çš„æ“ä½œï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸èƒ½å®¹å¿çš„ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­æˆ‘ä»¬å´å¯ä»¥ä½¿ç”¨å¼‚æ­¥ä»£ç æ¥è§£å†³ã€‚ä¸¾ä¸ªç‰¹æ®Šæ —å­â€”â€”è®¡ç®—æœºCPUï¼Œæˆ‘ä»¬å¯ä»¥å¬ç€éŸ³ä¹çš„åŒæ—¶æ„‰å¿«çš„ç ä»£ç ï¼Œçœ‹èµ·æ¥æ’­æ”¾éŸ³ä¹å’Œç¼–è¾‘ä»£ç æ˜¯å¹¶è¡Œçš„ï¼Œå…¶å®ä¸ç„¶ã€‚åœ¨è®¡ç®—æœºä¸­å¹¶æ²¡æœ‰ç»å¯¹æ„ä¹‰ä¸Šçš„å¹¶è¡Œï¼Œä»å¾®è§‚ä¸Šæ¥çœ‹ï¼Œå•æ ¸å¿ƒçš„CPUå…¶å®åœ¨åŒä¸€ä¸ªæ—¶é—´ç‰‡å†…åªèƒ½å¤„ç†å•ä¸€çš„ä»»åŠ¡ï¼Œä¸€æ—¦æŸä¸ªè¿›ç¨‹çš„æ—¶é—´ç‰‡ç»“æŸï¼ŒCPUä¼šé©¬ä¸Šè°ƒåº¦å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œå…ˆå‰çš„è¿›ç¨‹åˆ™å¤„äºæŒ‚èµ·çŠ¶æ€ç­‰å¾…è·å¾—æ—¶é—´ç‰‡åç»§ç»­æ‰§è¡Œï¼Œå¦‚æ­¤åå¤ï¼Œå®è§‚ä¸Šçœ‹èµ·æ¥è¿™äº›ä»»åŠ¡å°±æ˜¯å¹¶è¡Œå¤„ç†çš„ã€‚</p><p>å›åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„JSå¼•æ“ï¼Œä¸ºå®ç°è¿™æ ·çš„ç‰¹æ€§ï¼Œè¿™é‡Œå°±éœ€è¦å¼•ç”³å‡ºä¸€ä¸ªé‡è¦çš„ä¸œè¥¿ï¼Œ<em>Event Loop</em>ï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚</p><p>å½“å¼‚æ­¥æ–¹æ³•æ¯”å¦‚è¿™é‡Œçš„<strong>setTimeout()</strong>ï¼Œæˆ–è€…<strong>ajaxè¯·æ±‚</strong>ã€<strong>DOMäº‹ä»¶æ‰§è¡Œ</strong>çš„æ—¶å€™ï¼Œä¼šäº¤ç”±æµè§ˆå™¨å†…æ ¸çš„å…¶ä»–æ¨¡å—å»ç®¡ç†ã€‚å½“å¼‚æ­¥çš„æ–¹æ³•æ»¡è¶³è§¦å‘æ¡ä»¶åï¼Œè¯¥æ¨¡å—å°±ä¼šå°†æ–¹æ³•æ¨å…¥åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆ<em>task queue</em>ï¼‰ä¸­ï¼Œå½“ä¸»çº¿ç¨‹ä»£ç æ‰§è¡Œå®Œæ¯•å¤„äºç©ºé—²çŠ¶æ€çš„æ—¶å€™ï¼Œå°±ä¼šå»æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªä»»åŠ¡å…¥æ ˆæ‰§è¡Œï¼Œå®Œæ¯•åç»§ç»­æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æ­¤å¾ªç¯ã€‚å‰ææ¡ä»¶æ˜¯ä¸»çº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€ï¼Œè¿™å°±æ˜¯äº‹ä»¶å¾ªç¯çš„æ¨¡å‹ã€‚</p><h2 id="SetTimeout"><a href="#SetTimeout" class="headerlink" title="SetTimeout();"></a>SetTimeout();</h2><p>æ˜ç™½äº†ä¸Šé¢çš„ä¸œè¥¿ï¼Œé‚£ç†è§£setTimeoutçš„æœºåˆ¶å°±å®¹æ˜“å¾—å¤šäº†ã€‚å›åˆ°å¼€ç¯‡çš„ç¬¬ä¸€æ®µä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Timer1</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Timer2</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'world'</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>);</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚çš„çœ‹åˆ°æ‰§è¡Œçš„é¡ºåºï¼Œåšäº†ä¸€ä¸ªGIF</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/15/7213bb28fd30caa871d8ef75f425475a.gif" alt="æ‰§è¡Œæ­¥éª¤gif"></p><p>å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆä¾ç„¶æ˜¯main()å¼€å§‹ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªconsole.log()å…¥æ ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•æ§åˆ¶å°æ‰“å°â€™startâ€™åå‡ºæ ˆï¼Œç´§æ¥ç€æ‰§è¡Œåˆ°setTimeoutå®šæ—¶å™¨ï¼Œæ­¤æ—¶JSå¼•æ“ä¼šå°†å®šæ—¶å™¨äº¤ç»™æµè§ˆå™¨çš„å¦ä¸€ä¸ªæ¨¡å—å»ç®¡ç†ï¼ˆä¸ºæ–¹ä¾¿ç†è§£è¿™é‡ŒæŠŠå®ƒå«åšTimeræ¨¡å—ï¼‰ï¼Œç„¶åä¸»çº¿ç¨‹ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œç´§æ¥ç€å°†ç¬¬äºŒä¸ªå®šæ—¶å™¨ä¹Ÿäº¤ç»™Timeræ¨¡å—ï¼Œç„¶åæ‰§è¡Œåˆ°ç¬¬äºŒä¸ªconsole.log()ï¼Œæ§åˆ¶å°æ‰“å°â€™endâ€™ï¼Œæ‰§è¡Œå®Œæ¯•åæ¸…ç©ºæ‰§è¡Œæ ˆã€‚ä½†æ˜¯å¹¶æ²¡æœ‰ç»“æŸï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„åŒæ—¶ï¼ŒTimeræ¨¡å—ä¼šæ£€æŸ¥å…¶ä¸­çš„å¼‚æ­¥ä»£ç ï¼Œä¸€æ—¦æ»¡è¶³è§¦å‘æ¡ä»¶ï¼Œå°±ä¼šå°†å®ƒæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚Timer2å»¶è¿Ÿ100msï¼Œæ‰€ä»¥ä¼šæ—©äºTimer1è¢«æ·»åŠ åˆ°é˜Ÿåˆ—æ’å¤´ã€‚è€Œä¸»çº¿ç¨‹æ­¤æ—¶å¤„äºç©ºé—²çŠ¶æ€ï¼Œæ‰€ä»¥ä¼šæ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦æœ‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚æ­¤æ—¶ä¼šå°†Timer2å›è°ƒä¸­çš„console.log()æ‰§è¡Œï¼Œæ§åˆ¶å°æ‰“å°â€™worldâ€™ï¼Œç„¶åæ‰§è¡Œæ ˆç©ºé—²åç»§ç»­æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†Timer1çš„ä»£ç å‹å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ§åˆ¶å°æ‰“å°â€™helloâ€™ï¼Œæ¸…ç©ºæ‰§è¡Œæ ˆï¼Œæ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œæ‰§è¡Œç»“æŸã€‚</p><p>æ§åˆ¶å°ä¾æ¬¡æ‰“å°å‡ºï¼š</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/15/cebca6ff2376a956c7068066827c6557.png" alt="æ§åˆ¶å°æ‰“å°"></p><p>å†æ¥çœ‹å¼€ç¯‡ç¬¬äºŒæ®µæ”¹ç‰ˆä»£ç ï¼Œå°±æ¯”è¾ƒå¥½ç©äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Timer1</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Timer2</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'world'</span>);</span><br><span class="line">&#125;, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„ä»…ä»£è¡¨æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶è¿ç®—ï¼Œè¿™é‡Œå‡è®¾æ—¶é—´å¤§äº1ç§’ï¼Œ</span></span><br><span class="line"><span class="comment">// ä¾¿äºç†è§£æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ­¤å¤„ä¸éœ€è¦è¿‡åˆ†æ¢ç©¶æ‰§è¡Œæ—¶é—´</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Timer3</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I am run'</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>);</span><br></pre></td></tr></table></figure><p>å’Œç¬¬ä¸€æ®µä¸åŒçš„æ˜¯ï¼Œåœ¨æœ€åä¸€ä¸ªå®šæ—¶å™¨å‰åŠ äº†ä¸€æ®µforå¾ªç¯ï¼Œï¼ˆæ³¨ï¼šæ­¤å¤„ä»…ç”¨æ¥æ¨¡æ‹Ÿä¸€æ®µæ¯”è¾ƒè€—æ—¶çš„è¿ç®—ï¼Œå‡è®¾æ—¶é—´å¤§äº1ç§’ï¼Œä»£ç çœŸæ­£æ‰§è¡Œæ—¶é—´ä¸å¿…æ·±ç©¶ï¼‰ã€‚chromeæ§åˆ¶å°è¿è¡Œç»“æœæ˜¯ï¼š</p><p><img src="http://n1image.hjfile.cn/mh/2016/12/15/ac2f1caa8cf74b0c699567a66dd59e2b.png" alt="æ§åˆ¶å°æ‰“å°"></p><p>å‰é¢çš„é‚£å¼ Gifå›¾çœ‹æ‡‚äº†ä»¥åï¼Œå…¶å®ä»â€™worldâ€™ä¹‹å‰çš„æ‰“å°åº”è¯¥éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å¥‡æ€ªçš„åœ°æ–¹å°±æ˜¯ï¼ŒTimer3ä»…ä»…å»¶è¿Ÿäº†100msï¼Œåè€Œåœ¨å¦å¤–ä¸¤ä¸ªTimerä¹‹åæ‰§è¡Œäº†ã€‚å…¶å®è¿™é‡ŒåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºåœ¨Timer1å’ŒTimer2åŠ å…¥åˆ°æ‰§è¡Œé˜Ÿåˆ—ä¸­åï¼Œä¸»çº¿ç¨‹ä¾ç„¶è¿˜åœ¨æ‰§è¡Œforå¾ªç¯ä¸­çš„ä»£ç ï¼Œå¤„äºé˜»å¡çŠ¶æ€ã€‚é˜Ÿåˆ—ä¸­çš„Timer1å’ŒTimer2å¹¶ä¸ä¼šå¾—ä»¥æ‰§è¡Œã€‚å½“forå¾ªç¯ç»“æŸï¼Œè¿™æ—¶æ‰å°†Timer3äº¤ç”±Timeræ¨¡å—å»ç®¡ç†ï¼Œç»§ç»­æ‰§è¡Œåç»­ä»£ç æ‰“å°â€™endâ€™ï¼Œæ¸…ç©ºæ‰§è¡Œæ ˆã€‚è™½ç„¶åœ¨è¿™é‡ŒTimer3çš„å»¶è¿Ÿæ—¶é—´æœ€çŸ­ï¼Œä½†æ˜¯åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—åè¿˜æ˜¯ä¼šæ’åœ¨Timer1å’ŒTimer2çš„åé¢ï¼Œæ‰€ä»¥æ­¤æ—¶æŒ‰é¡ºåºæ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œä¾æ¬¡æ‰“å°â€™helloâ€™ã€â€™worldâ€™ã€â€™I am runâ€™ã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æƒ…å†µä¸‹çš„ä¸‰ä¸ªå®šæ—¶å™¨å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´å·²ç»è¿œè¿œè¶…è¿‡äº†æŒ‡å®šçš„æ—¶é—´ã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹å€¼å¾—ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›åŒå­¦å¯èƒ½ä¼šå†™è¿‡è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>å…¶å®JSå¼•æ“åœ¨å¤„ç†è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„å»¶è¿Ÿ0msæ‰§è¡Œã€‚ä¸åŒçš„æµè§ˆå™¨ä¼šé»˜è®¤æœ‰ä¸€ä¸ªæœ€å°çš„å»¶è¿Ÿæ—¶é—´ï¼Œä½äºè¿™ä¸ªæ—¶é—´é—´éš”ä¼šæŒ‰ç…§é»˜è®¤æœ€å°çš„æ—¶é—´é—´éš”æ¥å¤„ç†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬å‘ç°ä¸è®ºäº‹ä»¶å¾ªç¯ï¼ˆ_Event Loop_ï¼‰æ¨¡å‹è¿˜æ˜¯setTimeoutæœºåˆ¶ï¼Œå…¶å®å¹¶ä¸æ˜¯éš¾ç‚¹ï¼Œä½†å´æ˜¯å¾ˆå¤šå¼€å‘åŒå­¦å®¹æ˜“å¿½ç•¥çš„ç‚¹ã€‚å¾ˆå¤šé—®é¢˜çš„äº§ç”Ÿå¯èƒ½å°±æ˜¯å› ä¸ºå¿½ç•¥äº†ä¸€äº›ç®€å•çš„åŸç†å¯¼è‡´çš„ã€‚æ‰€ä»¥è¿™äº›åŸºæœ¬çš„çŸ¥è¯†ç‚¹éœ€è¦æŒæ¡æ‰å®ï¼Œæ‰èƒ½æ›´å¥½çš„é©¾é©­Javascriptã€‚å¦‚æœæœ‰å…´è¶£å¯ä»¥ç¿»å¢™çœ‹ä¸€çœ‹ä¸‹é¢å‚è€ƒä¸­çš„è§†é¢‘ï¼Œå¼ºçƒˆæ¨èï¼</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><blockquote><p><a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" target="_blank" rel="noopener">Philip Roberts: What the heck is the event loop anyway?</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¶å®è¯´èµ·JavaScriptä¸­çš„å®šæ—¶å™¨(&lt;em&gt;Timer&lt;/em&gt;)ä¸­çš„ &lt;em&gt;setTimeout()&lt;/em&gt; æ–¹æ³•ï¼Œä»äº‹å¼€å‘çš„åŒå­¦æƒ³å¿…éƒ½ä¸ä¼šé™Œç”Ÿï¼Œè§‰å¾—è¿™äº›ä¸œè¥¿å¾ˆç®€å•å¾ˆåŸºç¡€ã€‚ä½†æ˜¯æœ‰æ—¶å€™æ°æ°æ˜¯åŸºç¡€ç®€å•çš„ä¸œè¥¿ï¼Œæ‰è¶Šå®¹æ˜“è¢«å¿½ç•¥ã€‚å…ˆçœ‹ä¸€æ®µä»£ç ï¼š&lt;br&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Javascript ä¸­å®ç°ä½æ•°å­—æ·»åŠ åƒåˆ†ä½</title>
    <link href="https://tianxiaohu.online/2019/06/11/front-end/javascript/qian-fen-wei/"/>
    <id>https://tianxiaohu.online/2019/06/11/front-end/javascript/qian-fen-wei/</id>
    <published>2019-06-11T20:30:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©èŠä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨ JavaScript ä¸­ä¸ºæ•°å­—æ·»åŠ åƒåˆ†ä½ã€‚è¿™ç§åœ¨ä¸€äº›éœ€è¦æ˜¾ç¤ºé‡‘é¢çš„åœ°æ–¹å¯èƒ½ä¼šç”¨åˆ°ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ¢ç´¢å‡ ç§ä¸åŒçš„æ–¹æ³•ã€‚</p><a id="more"></a><h1 id="è§£æ³•ä¸€ï¼štoLocaleString"><a href="#è§£æ³•ä¸€ï¼štoLocaleString" class="headerlink" title="è§£æ³•ä¸€ï¼štoLocaleString()"></a>è§£æ³•ä¸€ï¼štoLocaleString()</h1><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ç§æ¯”è¾ƒç®€å•çš„æ–¹æ³•ï¼Œä»£ç è¡Œæ•°æœ€å°‘ã€‚numObj.toLocaleString([locales [, options]])</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">1234567</span>;</span><br><span class="line"><span class="keyword">const</span> str = num.toLocaleString()</span><br><span class="line"><span class="built_in">console</span>.log(str) <span class="comment">// 1,234,567</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨å‰éœ€è¦å…ˆå…³æ³¨ä¸‹å„ä¸ªæµè§ˆå™¨çš„å…¼å®¹æ€§æƒ…å†µã€‚</p><h2 id="è§£æ³•äºŒï¼šæ­£åˆ™"><a href="#è§£æ³•äºŒï¼šæ­£åˆ™" class="headerlink" title="è§£æ³•äºŒï¼šæ­£åˆ™"></a>è§£æ³•äºŒï¼šæ­£åˆ™</h2><p>æ­£åˆ™æ˜¯æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„ä¸€ç§æ–¹å¼ï¼Œä»£ç é‡å°‘å¹¶ä¸”æ‰§è¡Œæ•ˆç‡è¾ƒé«˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="string">'10000000000'</span>;</span><br><span class="line"><span class="keyword">const</span> result = num.replace(<span class="regexp">/\d&#123;1,3&#125;(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">'$&amp;,'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 10,000,000,000</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡ä¸Šé¢çš„è¿™ç§æ­£åˆ™ä¸æ”¯æŒæ•°å­—é‡Œé¢å¸¦å°æ•°ç‚¹ã€‚å¦‚æœå¸¦æœ‰å°æ•°ç‚¹çš„å¯èƒ½éœ€è¦é¢å¤–å¤„ç†ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="string">'12345678.01'</span>;</span><br><span class="line"><span class="keyword">const</span> [left, right] = num.split(<span class="string">'.'</span>);</span><br><span class="line"><span class="keyword">const</span> result = <span class="string">`<span class="subst">$&#123;left.replace(<span class="regexp">/\d&#123;1,3&#125;(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">'$&amp;,'</span>)&#125;</span>.<span class="subst">$&#123;right&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 12,345,678.01</span></span><br></pre></td></tr></table></figure><h2 id="è§£æ³•ä¸‰ï¼šfor-å¾ªç¯"><a href="#è§£æ³•ä¸‰ï¼šfor-å¾ªç¯" class="headerlink" title="è§£æ³•ä¸‰ï¼šfor å¾ªç¯"></a>è§£æ³•ä¸‰ï¼šfor å¾ªç¯</h2><p>é€šè¿‡å¾ªç¯çš„æ–¹å¼ï¼Œè‡ªç„¶æ˜¯æœ€ç¬¦åˆç¨‹åºçŒ¿æ€ç»´çš„æ–¹å¼äº†ã€‚ä¸è¿‡ç›¸æ¯”è¾ƒä¸Šé¢çš„ä¸¤ç§æ–¹å¼ä»£ç é‡å°±æ¯”è¾ƒå¤šäº†ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> numStr = <span class="string">`<span class="subst">$&#123;num&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = numStr.length - <span class="number">1</span>, j = <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--, j++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(j%<span class="number">3</span> === <span class="number">0</span> &amp;&amp; i !== <span class="number">0</span>)&#123;</span><br><span class="line">      str += <span class="string">`<span class="subst">$&#123;numStr[i]&#125;</span>,`</span>;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    str += numStr[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è§£æ³•å››ï¼šreduce-ç‰ˆæœ¬"><a href="#è§£æ³•å››ï¼šreduce-ç‰ˆæœ¬" class="headerlink" title="è§£æ³•å››ï¼šreduce ç‰ˆæœ¬"></a>è§£æ³•å››ï¼šreduce ç‰ˆæœ¬</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> numStr = <span class="string">`<span class="subst">$&#123;num&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">return</span> numStr.split(<span class="string">''</span>).reverse().reduce(<span class="function">(<span class="params">prev, next, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ((index % <span class="number">3</span>) ? next : <span class="string">`<span class="subst">$&#123;next&#125;</span>,`</span>) + prev;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å“ˆå“ˆ  just for fun!</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©èŠä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨ JavaScript ä¸­ä¸ºæ•°å­—æ·»åŠ åƒåˆ†ä½ã€‚è¿™ç§åœ¨ä¸€äº›éœ€è¦æ˜¾ç¤ºé‡‘é¢çš„åœ°æ–¹å¯èƒ½ä¼šç”¨åˆ°ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ¢ç´¢å‡ ç§ä¸åŒçš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ä¸­ this çš„ç»‘å®šè§„åˆ™</title>
    <link href="https://tianxiaohu.online/2018/06/27/front-end/javascript/javascript-this/"/>
    <id>https://tianxiaohu.online/2018/06/27/front-end/javascript/javascript-this/</id>
    <published>2018-06-27T21:08:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>javascript ä¸­çš„ <code>this</code> æœ‰æ—¶å€™æ˜¯æ¯”è¾ƒé­”å¹»çš„ä¸€ä¸ªå­˜åœ¨ï¼Œåœ¨ JavaScript ä¸­ this æœ‰å‡ ç§å¸¸è§çš„ç»‘å®šæ–¹å¼ï¼Œä»Šå¤©å°±æ¥è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹ã€‚</p><a id="more"></a><h2 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h2><p>é»˜è®¤ç»‘å®š this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå³ï¼šâ€˜use strictâ€™ ï¼Œthis ä¼šè¢«ç»‘å®šæˆ undefinedã€‚</p><h2 id="éšå¼ç»‘å®š"><a href="#éšå¼ç»‘å®š" class="headerlink" title="éšå¼ç»‘å®š"></a>éšå¼ç»‘å®š</h2><p>å½“å‡½æ•°å¼•ç”¨æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡æ—¶ï¼Œéšå¼ç»‘å®šè§„åˆ™ä¼šæŠŠå‡½æ•°ä¸­çš„ this ç»‘å®šåˆ°è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span>,</span><br><span class="line">    foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.foo(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>å‚æ•°ä¼ é€’å°±æ˜¯ä¸€ç§éšå¼èµ‹å€¼ï¼Œä¼ å…¥å‡½æ•°æ—¶ä¹Ÿä¼šè¢«éšå¼èµ‹å€¼ã€‚</p><h2 id="æ˜¾ç¤ºç»‘å®š"><a href="#æ˜¾ç¤ºç»‘å®š" class="headerlink" title="æ˜¾ç¤ºç»‘å®š"></a>æ˜¾ç¤ºç»‘å®š</h2><p>å¾ˆå¤šå‡½æ•°æä¾›äº†å¯é€‰å‚æ•°ï¼Œæ¥åˆ¶å®šä¸Šä¸‹æ–‡ã€‚æ¯”å¦‚ Array çš„ forEach æ–¹æ³• <code>arr.forEach(fun, context)</code>ï¼Œcontext æŒ‡å®šäº†å‡½æ•° fun çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚é€šè¿‡ callã€apply æˆ–è€… bind è¿™äº›å‡½æ•°ï¼Œå¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šå‡½æ•°çš„ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚</p><p>æ³¨æ„ï¼šæŠŠ <code>null</code>æˆ–è€… <code>undefined</code> ä½œä¸º this çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ callã€apply æˆ–è€… bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ã€‚</p><p>call å’Œ apply çš„åŒºåˆ«åœ¨äºï¼Œ<code>call</code> æ–¹æ³•æ¥å—çš„æ˜¯è‹¥å¹²ä¸ªå‚æ•°çš„åˆ—è¡¨ï¼Œè€Œ <code>apply</code> æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„ã€‚</p><p>call apply çš„ä½¿ç”¨æ–¹æ³•ä¸¾ä¾‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ•°ç»„ï¼š </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Array]'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„æœ€å¤§å€¼:</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , <span class="number">-215</span> ]; </span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, numbers);   <span class="comment">//458</span></span><br></pre></td></tr></table></figure><h3 id="å®ç°-call-ctx-arg1-arg2-â€¦"><a href="#å®ç°-call-ctx-arg1-arg2-â€¦" class="headerlink" title="å®ç° call(ctx, arg1, arg2 â€¦)"></a>å®ç° call(ctx, arg1, arg2 â€¦)</h3><p>ç®€å•ç‰ˆæœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ­¤æ—¶ç¯å¢ƒä¸­ contextå°±æ˜¯ç›®æ ‡ä¸Šä¸‹æ–‡ï¼Œthiså°±æ˜¯åŸæ¥çš„å‡½æ•°</span></span><br><span class="line">    context.fn = <span class="keyword">this</span>; <span class="comment">// foo.fn = bar</span></span><br><span class="line">    context.fn();<span class="comment">// foo.fn()</span></span><br><span class="line">    <span class="keyword">delete</span> context.fn;<span class="comment">// delete foo.fn</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">var</span> foo = &#123; <span class="attr">value</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">bar.myCall(foo);  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>å¤æ‚ç‰ˆæœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall2 = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context = context ? <span class="built_in">Object</span>(context) : <span class="built_in">window</span>; </span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> result = context.fn(...args);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°-apply-ctx-arg1-arg2-â€¦"><a href="#å®ç°-apply-ctx-arg1-arg2-â€¦" class="headerlink" title="å®ç° apply(ctx, [arg1, arg2 â€¦])"></a>å®ç° apply(ctx, [arg1, arg2 â€¦])</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply = <span class="function"><span class="keyword">function</span> (<span class="params">context, arr</span>) </span>&#123;</span><br><span class="line">    context = context ? <span class="built_in">Object</span>(context) : <span class="built_in">window</span>; </span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">        result = context.fn();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = context.fn(...arr);</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="new-ç»‘å®š"><a href="#new-ç»‘å®š" class="headerlink" title="new ç»‘å®š"></a>new ç»‘å®š</h2><p>è¿˜æœ‰ä¸€ç§ this çš„ç»‘å®šæ–¹å¼å°±æ˜¯é€šè¿‡ <code>new</code> æ“ä½œç¬¦ã€‚new ä¼šå°†æ„é€ å‡½æ•°çš„thisæŒ‡å‘è¯¥å¯¹è±¡ã€‚</p><h2 id="ç®­å¤´å‡½æ•°ç»‘å®š"><a href="#ç®­å¤´å‡½æ•°ç»‘å®š" class="headerlink" title="ç®­å¤´å‡½æ•°ç»‘å®š"></a>ç®­å¤´å‡½æ•°ç»‘å®š</h2><p>æœ€åä¸€ç§å°±æ˜¯åœ¨ç®­å¤´å‡½æ•°ä¸­çš„ç»‘å®šã€‚ç®­å¤´å‡½æ•° this ç»‘å®šæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>ç®­å¤´å‡½æ•°ä¸ç»‘å®š thisï¼Œç®­å¤´å‡½æ•°ä¸­çš„ this ç›¸å½“äºæ™®é€šå˜é‡ã€‚</li><li>ç®­å¤´å‡½æ•°çš„thiså¯»å€¼è¡Œä¸ºä¸æ™®é€šå˜é‡ç›¸åŒï¼Œåœ¨ä½œç”¨åŸŸä¸­é€çº§å¯»æ‰¾ã€‚</li><li>ç®­å¤´å‡½æ•°çš„thisæ— æ³•é€šè¿‡bindï¼Œcallï¼Œapplyæ¥ç›´æ¥ä¿®æ”¹ï¼ˆå¯ä»¥é—´æ¥ä¿®æ”¹ï¼‰ã€‚</li><li>æ”¹å˜ä½œç”¨åŸŸä¸­thisçš„æŒ‡å‘å¯ä»¥æ”¹å˜å½“å‰ä½œç”¨åŸŸä¸­çš„ç®­å¤´å‡½æ•°çš„thisã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;javascript ä¸­çš„ &lt;code&gt;this&lt;/code&gt; æœ‰æ—¶å€™æ˜¯æ¯”è¾ƒé­”å¹»çš„ä¸€ä¸ªå­˜åœ¨ï¼Œåœ¨ JavaScript ä¸­ this æœ‰å‡ ç§å¸¸è§çš„ç»‘å®šæ–¹å¼ï¼Œä»Šå¤©å°±æ¥è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹åŠ¨å®ç° jsonp è§£å†³è·¨åŸŸé—®é¢˜</title>
    <link href="https://tianxiaohu.online/2018/05/23/front-end/javascript/javascript-jsonp/"/>
    <id>https://tianxiaohu.online/2018/05/23/front-end/javascript/javascript-jsonp/</id>
    <published>2018-05-23T20:06:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç«¯è·¨åŸŸæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œè§£å†³è·¨åŸŸçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œ<code>jsonp</code> å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚ä»Šå¤©å°±æ¥ç®€å•å®ç°ä¸€ä¸ª <code>jsonp</code></p><a id="more"></a><h2 id="ä½•ä¸ºè·¨åŸŸ"><a href="#ä½•ä¸ºè·¨åŸŸ" class="headerlink" title="ä½•ä¸ºè·¨åŸŸ"></a>ä½•ä¸ºè·¨åŸŸ</h2><p>é€šä¿—æ˜“æ‡‚çš„è¯´ï¼Œè·¨åŸŸå°±æ˜¯ä¸€ä¸ªåŸŸä¸‹é¢çš„è„šæœ¬å»è¯·æ±‚å¦ä¸€ä¸ªåŸŸä¸‹é¢çš„èµ„æºï¼Œå°±æˆä¸ºè·¨åŸŸã€‚ä¸è¿‡è¿™ç§è¯´æ³•æ˜¯æ¯”è¾ƒå¹¿ä¹‰çš„è¯´æ³•ã€‚</p><p>å¹³æ—¶å‰ç«¯å¼€å‘ä¸­æ‰€è¯´çš„è·¨åŸŸï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯ç”±æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ â€”â€” â€œåŒæºç­–ç•¥â€ æ‰€å¯¼è‡´çš„ã€‚</p><h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p><strong>åŒæºç­–ç•¥</strong>æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒç”¨äºé™åˆ¶ä¸€ä¸ªoriginçš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬å¦‚ä½•èƒ½ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚å®ƒèƒ½å¸®åŠ©é˜»éš”æ¶æ„æ–‡æ¡£ï¼Œå‡å°‘å¯èƒ½è¢«æ”»å‡»çš„åª’ä»‹ã€‚<br>å¦‚æœä¸¤ä¸ª URL çš„ protocolã€port (å¦‚æœæœ‰æŒ‡å®šçš„è¯)å’Œ host éƒ½ç›¸åŒçš„è¯ï¼Œåˆ™è¿™ä¸¤ä¸ª URL æ˜¯åŒæºã€‚è¿™ä¸ªæ–¹æ¡ˆä¹Ÿè¢«ç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£å…ƒç»„â€ï¼Œæˆ–è€…ç›´æ¥æ˜¯ â€œå…ƒç»„â€ã€‚ï¼ˆâ€œå…ƒç»„â€ æ˜¯æŒ‡ä¸€ç»„é¡¹ç›®æ„æˆçš„æ•´ä½“ï¼ŒåŒé‡/ä¸‰é‡/å››é‡/äº”é‡/ç­‰çš„é€šç”¨å½¢å¼ï¼‰ã€‚</p><h2 id="å¸¸è§çš„è§£å†³è·¨åŸŸçš„æ–¹æ³•"><a href="#å¸¸è§çš„è§£å†³è·¨åŸŸçš„æ–¹æ³•" class="headerlink" title="å¸¸è§çš„è§£å†³è·¨åŸŸçš„æ–¹æ³•"></a>å¸¸è§çš„è§£å†³è·¨åŸŸçš„æ–¹æ³•</h2><p>åœ¨å‰ç«¯çš„å¼€å‘ä¸­ï¼Œè·¨åŸŸåº”è¯¥æ˜¯æœ€å¸ç©ºè§æƒ¯çš„é—®é¢˜ã€‚è§£å†³è·¨åŸŸå…¶å®æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œå¸¸ç”¨çš„æ–¹æ³•æœ‰ï¼š</p><ul><li>é€šè¿‡jsonpè·¨åŸŸ</li><li>document.domain + iframeè·¨åŸŸ</li><li>postMessageè·¨åŸŸ</li><li>nginxä»£ç†è·¨åŸŸ</li><li>nodejsä¸­é—´ä»¶ä»£ç†è·¨åŸŸ</li></ul><p>ç­‰ç­‰â€¦</p><h2 id="jsonp-è·¨åŸŸæ–¹æ¡ˆ"><a href="#jsonp-è·¨åŸŸæ–¹æ¡ˆ" class="headerlink" title="jsonp è·¨åŸŸæ–¹æ¡ˆ"></a>jsonp è·¨åŸŸæ–¹æ¡ˆ</h2><p>ä»ä¸Šé¢å¯ä»¥çŸ¥é“ï¼Œå…¶å®å®é™…å¼€å‘ä¸­è§£å†³è·¨åŸŸçš„æ–¹æ¡ˆæœ‰å¾ˆå¤šç§ã€‚ä¸è¿‡æˆ‘ä»¬è¿™æ¬¡åªä»‹ç» <code>jsonp</code> è¿™ç§æ–¹æ¡ˆã€‚<br>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window, document</span>) </span>&#123;</span><br><span class="line"><span class="meta">  "use strict"</span>;</span><br><span class="line">  <span class="keyword">var</span> jsonp = <span class="function"><span class="keyword">function</span>(<span class="params">url, data, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dataString = url.indexof(<span class="string">"?"</span>) === <span class="number">-1</span> ? <span class="string">"?"</span> : <span class="string">"&amp;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">      dataString += key + <span class="string">"="</span> + data[key] + <span class="string">"&amp;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cbFuncName = <span class="string">"my_json_cb_"</span> + <span class="built_in">Math</span>.random().toString().replace(<span class="string">"."</span>, <span class="string">""</span>);</span><br><span class="line">    dataString += <span class="string">"callback="</span> + cbFuncName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> scriptEle = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    scriptEle.src = url + dataString;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>[cbFuncName] = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">      callback(data);</span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(scriptEle);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(scriptEle);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.$jsonp = jsonp;</span><br><span class="line">&#125;)(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ²¡æœ‰ä½¿ç”¨ç›®å‰æµè¡Œçš„ES6è¯­æ³•ï¼Œç›®çš„æ˜¯æ–¹ä¾¿ä½¿ç”¨ã€‚ä¸è¿‡ç›®å‰å¼€å‘éƒ½æ˜¯ä½¿ç”¨babelç¼–è¯‘çš„ï¼Œå¯ä»¥è‡ªè¡Œå°†ä»£ç è½¬æ¢ä¸ºES6è¯­æ³•ï¼Œè¿™æ ·çœ‹èµ·æ¥æ›´èˆ’æœä¸€ç‚¹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ç«¯è·¨åŸŸæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œè§£å†³è·¨åŸŸçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œ&lt;code&gt;jsonp&lt;/code&gt; å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚ä»Šå¤©å°±æ¥ç®€å•å®ç°ä¸€ä¸ª &lt;code&gt;jsonp&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ä¸­çš„ æ·±æ‹·è´ vs æµ…æ‹·è´</title>
    <link href="https://tianxiaohu.online/2018/03/08/front-end/javascript/javascript-copy/"/>
    <id>https://tianxiaohu.online/2018/03/08/front-end/javascript/javascript-copy/</id>
    <published>2018-03-08T22:12:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript ä¸­çš„æ·±æ‹·è´ä¸æµ…æ‹·è´</p><a id="more"></a><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>åœ¨è®²æ·±æ‹·è´å’Œæµ…æ‹·è´ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥é‡æ–°å›é¡¾ä¸€ä¸‹ JavaScript ä¸­çš„æ•°æ®ç±»å‹ã€‚ åœ¨JavaScriptä¸­ï¼Œæ•°æ®çš„ç±»å‹å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š<code>åŸºæœ¬æ•°æ®ç±»å‹</code> å’Œ <code>å¼•ç”¨ç±»å‹</code>ã€‚</p><h3 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h3><p>åŸºæœ¬æ•°æ®ç±»å‹å°±å¾ˆå¥½ç†è§£äº†ï¼Œå¸¸è§çš„ <code>undefined</code>ï¼Œ<code>boolean</code>ï¼Œ<code>number</code>ï¼Œ<code>string</code>ï¼Œ<code>null</code> ç­‰è¿™äº›éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚<br>åŸºæœ¬ç±»å‹æ˜¯å­˜å‚¨åœ¨å†…å­˜çš„ <code>æ ˆ</code> ä¸­ï¼Œç›´æ¥æŒ‰ç…§å€¼æ¥å­˜æ”¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåŸºæœ¬ç±»å‹çš„å€¼æ˜¯ä¸å¯æ”¹å˜çš„ã€‚</p><p>å°±æ‹¿ <code>å­—ç¬¦ä¸²ç±»å‹</code> æ¥è¯´ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ Java æ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ï¼Œåœ¨ Java ä¸­ï¼Œ<code>String</code> ç±»å‹æ˜¯ Public final ä¿®é¥°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œåœ¨Javaä¸­å­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸ä¼šåœ¨è¢«æ›´æ”¹ã€‚</p><p>è™½ç„¶ JavaScript æ˜¯å¼±ç±»å‹çš„è¯­è¨€ï¼Œä½†æ˜¯åœ¨å­—ç¬¦ä¸²æ–¹é¢è¿˜æ˜¯å’Œ java ä¿æŒä¸€è‡´çš„ã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>string</code> å­—ç¬¦ä¸²åŒæ ·ä¹Ÿæ˜¯ä¸å¯å˜çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lang = <span class="string">"Java"</span>;</span><br><span class="line">lang = lang + <span class="string">"Script"</span>;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œè™½ç„¶ <code>lang</code> è¢«åˆå§‹èµ‹å€¼æˆ <code>Java</code> ååˆé‡æ–°æŒ‡å‘äº†æ–°çš„ <code>JavaScript</code>ï¼Œä½†æ˜¯åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸æ˜¯ç®€å•çš„å°† <code>Java</code> å­—ç¬¦ä¸²ä¿®æ”¹æˆ <code>Javascript</code>ï¼Œè€Œæ˜¯é‡æ–°åˆ›å»ºæ–°çš„å­—ç¬¦ä¸²ã€‚</p><h3 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h3><p>å¼•ç”¨ç±»å‹æ˜¯å­˜æ”¾åœ¨å†…å­˜ <code>å †</code> ä¸­ã€‚æ¯”å¦‚å¸¸è§çš„ å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°éƒ½å±äºå¼•ç”¨ç±»å‹ã€‚å˜é‡å®è´¨ä¸Šå­˜æ”¾çš„æ˜¯è¯¥å¯¹è±¡åœ¨ <code>å †</code> ä¸­çš„ä¸€ä¸ªåœ°å€ã€‚</p><p>ä¸åŸºæœ¬ç±»å‹ä¸åŒçš„æ˜¯ï¼Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œæ”¹å˜çš„å…¶å®ä¹Ÿæ˜¯å…¶åœ¨å †å†…å­˜ä¸­çš„åœ°å€å€¼ã€‚</p><h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><p>æµ…æ‹·è´å°±æ˜¯åªå¤åˆ¶æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡å…±äº«ä¸€å—å†…å­˜ã€‚<br>å¸¸è§çš„æµ…æ‹·è´æ“ä½œæœ‰ï¼š</p><p>Object.assignã€å±•å¼€è¯­æ³• â€œâ€¦â€ã€Array.prototype.slice ç­‰ç­‰ã€‚</p><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p>å¤åˆ¶å¹¶åˆ›å»ºä¸€ä¸ªä¸€æ‘¸ä¸€æ ·çš„å¯¹è±¡ï¼Œä¸å…±äº«å†…å­˜ï¼Œä¿®æ”¹æ–°å¯¹è±¡ï¼Œæ—§å¯¹è±¡ä¿æŒä¸å˜ï¼Œè¿™ç§°ä¹‹ä¸ºæ·±æ‹·è´ã€‚</p><p>å¸¸è§çš„ç¬¬ä¸‰æ–¹åº“ <code>JQuery</code> <code>lodash</code> éƒ½æä¾›æœ‰æ·±æ‹·è´çš„ apiã€‚</p><p>æœ€ç®€å•çš„å®ç°æ·±æ‹·è´çš„æ–¹æ³•å°±æ˜¯åˆ©ç”¨ JSON.parse</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™ç§æ–¹å¼æœ‰å±€é™ï¼š</p><ol><li>ä¼šå¿½ç•¥ undefined</li><li>ä¼šå¿½ç•¥ symbol</li><li>ä¸èƒ½åºåˆ—åŒ–å‡½æ•°</li><li>ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡</li><li>ä¸èƒ½æ­£ç¡®å¤„ç†new Date()</li><li>ä¸èƒ½å¤„ç†æ­£åˆ™</li></ol><h2 id="ç®€å•å®ç°æ·±æ‹·è´"><a href="#ç®€å•å®ç°æ·±æ‹·è´" class="headerlink" title="ç®€å•å®ç°æ·±æ‹·è´"></a>ç®€å•å®ç°æ·±æ‹·è´</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneDeep</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="keyword">typeof</span> source === <span class="string">'object'</span> &amp;&amp; source != <span class="literal">null</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> source; <span class="comment">// éå¯¹è±¡è¿”å›è‡ªèº«</span></span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">var</span> target = <span class="built_in">Array</span>.isArray(source) ? [] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(source, key)) &#123;</span><br><span class="line">            <span class="keyword">var</span> prop = source[key];</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> prop === <span class="string">'object'</span> &amp;&amp; prop != <span class="literal">null</span>) &#123;</span><br><span class="line">                target[key] = cloneDeep(prop); <span class="comment">// æ³¨æ„è¿™é‡Œ</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                target[key] = source[key];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JavaScript ä¸­çš„æ·±æ‹·è´ä¸æµ…æ‹·è´&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•æ¨¡æ‹Ÿå®ç° Promise.all</title>
    <link href="https://tianxiaohu.online/2017/09/17/front-end/javascript/promise-all/"/>
    <id>https://tianxiaohu.online/2017/09/17/front-end/javascript/promise-all/</id>
    <published>2017-09-17T23:09:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹ Promise.all() æ–¹æ³•çš„å®šä¹‰ã€‚<br>Promise.all() æ–¹æ³•æ¥æ”¶ä¸€ä¸ª <code>promise</code> çš„ <code>iterable</code> ç±»å‹ï¼ˆæ³¨ï¼šArrayï¼ŒMapï¼ŒSetéƒ½å±äºES6çš„iterableç±»å‹ï¼‰çš„è¾“å…¥ï¼Œå¹¶ä¸”åªè¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œ<br>é‚£ä¸ªè¾“å…¥çš„æ‰€æœ‰promiseçš„resolveå›è°ƒçš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¿™ä¸ª Promise çš„ resolve å›è°ƒæ‰§è¡Œæ˜¯åœ¨æ‰€æœ‰è¾“å…¥çš„promiseçš„resolveå›è°ƒéƒ½ç»“æŸï¼Œ<br>æˆ–è€…è¾“å…¥çš„iterableé‡Œæ²¡æœ‰promiseäº†çš„æ—¶å€™ã€‚å®ƒçš„rejectå›è°ƒæ‰§è¡Œæ˜¯ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªè¾“å…¥çš„promiseçš„rejectå›è°ƒæ‰§è¡Œæˆ–è€…è¾“å…¥ä¸åˆæ³•çš„promiseå°±ä¼šç«‹å³æŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”rejectçš„æ˜¯ç¬¬ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ã€‚</p> <a id="more"></a><h2 id="Promise-all-çš„ä½¿ç”¨"><a href="#Promise-all-çš„ä½¿ç”¨" class="headerlink" title="Promise.all çš„ä½¿ç”¨"></a>Promise.all çš„ä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> promise3 = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">Promise</span>.all([promise1, promise2, promise3])</span><br><span class="line">  .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value); <span class="comment">// [1, 2, 3]  </span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h2 id="æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª-Promise-all"><a href="#æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª-Promise-all" class="headerlink" title="æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Promise.all"></a>æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Promise.all</h2><p>ä» Promise.all çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒPromise.all å…·æœ‰è¿™æ ·çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¥æ”¶ä¸€ä¸ª Promise å®ä¾‹çš„æ•°ç»„æˆ–å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡ï¼Œ</li><li>å¦‚æœå…ƒç´ ä¸æ˜¯ Promise å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ Promise.resolve è½¬æˆ Promise å¯¹è±¡</li><li>å¦‚æœå…¨éƒ¨æˆåŠŸï¼ŒçŠ¶æ€å˜ä¸º resolvedï¼Œè¿”å›å€¼å°†ç»„æˆä¸€ä¸ªæ•°ç»„ä¼ ç»™å›è°ƒ</li><li>åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼ŒçŠ¶æ€å°±å˜ä¸º rejectedï¼Œè¿”å›å€¼å°†ç›´æ¥ä¼ é€’ç»™å›è°ƒ all() çš„è¿”å›å€¼ä¹Ÿæ˜¯æ–°çš„ Promise å¯¹è±¡</li></ul><p>é‚£ä¹ˆæˆ‘ä»¬å°è¯•æ¥å®ç°ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promiseAll</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">(resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(promises)) &#123;</span><br><span class="line">      <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'argument must be an array'</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> promiseLen = promises.length;</span><br><span class="line">    <span class="comment">// ç”¨æ¥æ¥æ”¶ç»“æœçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">let</span> resolveValues = [];</span><br><span class="line">    <span class="comment">// å®šä¸€ä¸ªå˜é‡è®°å½•resolveçš„promiseçš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">let</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promiseLen; i++) &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(promises[i])</span><br><span class="line">        .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">          counter++;</span><br><span class="line">          resolveValues[i] = data;</span><br><span class="line">          <span class="comment">// å½“æ‰€æœ‰promise resolveåï¼Œæ•´ä¸ªpromise resolve</span></span><br><span class="line">          <span class="keyword">if</span> (counter === promiseLen) &#123;</span><br><span class="line">            resolve(resolveValues);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          reject(err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„æ¨¡æ‹Ÿ Promise.all çš„æ–¹æ³•ã€‚æ¬¢è¿å¤§å®¶è®¨è®ºã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹ Promise.all() æ–¹æ³•çš„å®šä¹‰ã€‚&lt;br&gt;Promise.all() æ–¹æ³•æ¥æ”¶ä¸€ä¸ª &lt;code&gt;promise&lt;/code&gt; çš„ &lt;code&gt;iterable&lt;/code&gt; ç±»å‹ï¼ˆæ³¨ï¼šArrayï¼ŒMapï¼ŒSetéƒ½å±äºES6çš„iterableç±»å‹ï¼‰çš„è¾“å…¥ï¼Œå¹¶ä¸”åªè¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œ&lt;br&gt;é‚£ä¸ªè¾“å…¥çš„æ‰€æœ‰promiseçš„resolveå›è°ƒçš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¿™ä¸ª Promise çš„ resolve å›è°ƒæ‰§è¡Œæ˜¯åœ¨æ‰€æœ‰è¾“å…¥çš„promiseçš„resolveå›è°ƒéƒ½ç»“æŸï¼Œ&lt;br&gt;æˆ–è€…è¾“å…¥çš„iterableé‡Œæ²¡æœ‰promiseäº†çš„æ—¶å€™ã€‚å®ƒçš„rejectå›è°ƒæ‰§è¡Œæ˜¯ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªè¾“å…¥çš„promiseçš„rejectå›è°ƒæ‰§è¡Œæˆ–è€…è¾“å…¥ä¸åˆæ³•çš„promiseå°±ä¼šç«‹å³æŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”rejectçš„æ˜¯ç¬¬ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>å®ç° Promise finally</title>
    <link href="https://tianxiaohu.online/2017/09/11/front-end/javascript/javascript-promise-finally/"/>
    <id>https://tianxiaohu.online/2017/09/11/front-end/javascript/javascript-promise-finally/</id>
    <published>2017-09-11T19:42:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ <code>Promise</code> å®ç° <code>finally</code> æ–¹æ³•</p><a id="more"></a><p>åºŸè¯ä¸å¤šè¯´ï¼Œæ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä¸Šä»£ç å§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> P = <span class="keyword">this</span>.constructor;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.then(</span><br><span class="line">    value =&gt; P.resolve(callback()).then(<span class="function"><span class="params">()</span> =&gt;</span> value),</span><br><span class="line">    reason =&gt; P.resolve(callback()).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="keyword">throw</span> reason &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ &lt;code&gt;Promise&lt;/code&gt; å®ç° &lt;code&gt;finally&lt;/code&gt; æ–¹æ³•&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ JavaScript ä¸­ new å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</title>
    <link href="https://tianxiaohu.online/2017/07/11/front-end/javascript/javascript-new/"/>
    <id>https://tianxiaohu.online/2017/07/11/front-end/javascript/javascript-new/</id>
    <published>2017-07-11T23:13:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JavaScript ä¸­å¯ä»¥é€šè¿‡ new æ“ä½œç¬¦æ¥å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆï¼Œåœ¨JavaScriptçš„åº•å±‚ï¼Œnew åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ</p><a id="more"></a><h2 id="new-å‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#new-å‘ç”Ÿäº†ä»€ä¹ˆ" class="headerlink" title="new å‘ç”Ÿäº†ä»€ä¹ˆ"></a>new å‘ç”Ÿäº†ä»€ä¹ˆ</h2><ol><li>é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>æ„é€ è¯¥å¯¹è±¡çš„ <code>_proto_</code> å±æ€§ã€‚</li><li>å°†æ„é€ å‡½æ•°çš„ä¸Šä¸‹æ–‡ <code>this</code> æŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°ã€‚</li><li>è¿”å›æ–°å¯¹è±¡</li></ol><h2 id="ç®€å•å®ç°ä¸€ä¸ª-new"><a href="#ç®€å•å®ç°ä¸€ä¸ª-new" class="headerlink" title="ç®€å•å®ç°ä¸€ä¸ª new"></a>ç®€å•å®ç°ä¸€ä¸ª <code>new</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> obj = <span class="built_in">Object</span>.create();</span><br><span class="line">    <span class="comment">// è·å¾—ä¼ å…¥çš„æ„é€ å‡½æ•°ï¼Œå–argumentså‰©ä½™å‚æ•°ä½œä¸ºå‚æ•°ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> Con = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="comment">// ç»‘å®šå¯¹è±¡çš„proto</span></span><br><span class="line">    obj._proto_ = Con.prototype;</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ„é€ å‡½æ•°ï¼ŒæŒ‡å®šthisä¸ºobj</span></span><br><span class="line">    <span class="keyword">let</span> result = Con.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="comment">// è¿”å›æ–°å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> result <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? result : obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨å†…ç½®çš„new</span></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> Person(<span class="string">'Toy'</span>, <span class="number">18</span>);</span><br><span class="line"><span class="comment">// ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> person2 = myNew(Person, <span class="string">'Toy'</span>, <span class="number">18</span>);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JavaScript ä¸­å¯ä»¥é€šè¿‡ new æ“ä½œç¬¦æ¥å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆï¼Œåœ¨JavaScriptçš„åº•å±‚ï¼Œnew åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>nodeä¸­çš„path</title>
    <link href="https://tianxiaohu.online/2017/05/18/front-end/node/path-vs-fs/"/>
    <id>https://tianxiaohu.online/2017/05/18/front-end/node/path-vs-fs/</id>
    <published>2017-05-18T20:00:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>path æ¨¡å—æä¾›äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸ç›®å½•çš„è·¯å¾„<br> <a id="more"></a></p><h1 id="Path"><a href="#Path" class="headerlink" title="Path"></a>Path</h1><p>path æ¨¡å—æä¾›äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸ç›®å½•çš„è·¯å¾„<br> <!-- more --></p><h2 id="1-path-basename-path-ext"><a href="#1-path-basename-path-ext" class="headerlink" title="1. path.basename(path[, ext])"></a>1. path.basename(path[, ext])</h2><p>path.basename() æ–¹æ³•è¿”å›ä¸€ä¸ª path çš„æœ€åä¸€éƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.basename(<span class="string">'/aaa/bbb/ccc.html'</span>);</span><br><span class="line">=&gt; ccc.html</span><br></pre></td></tr></table></figure><h2 id="2-path-dirname-path"><a href="#2-path-dirname-path" class="headerlink" title="2. path.dirname(path)"></a>2. path.dirname(path)</h2><p>path.dirname() æ–¹æ³•è¿”å›ä¸€ä¸ª path çš„ç›®å½•å</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.basename(<span class="string">'/aaa/bbb/ccc.html'</span>);</span><br><span class="line">=&gt; <span class="regexp">/aaa/</span>bbb</span><br></pre></td></tr></table></figure><h2 id="3-path-extname-path"><a href="#3-path-extname-path" class="headerlink" title="3. path.extname(path)"></a>3. path.extname(path)</h2><p>path.extname() æ–¹æ³•è¿”å› path çš„æ‰©å±•åï¼Œå³ä» path çš„æœ€åä¸€éƒ¨åˆ†ä¸­çš„æœ€åä¸€ä¸ª .ï¼ˆå¥å·ï¼‰å­—ç¬¦åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚ å¦‚æœ path çš„æœ€åä¸€éƒ¨åˆ†æ²¡æœ‰ . æˆ– path çš„æ–‡ä»¶åï¼ˆè§ path.basename()ï¼‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ .ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.basename(<span class="string">'/aaa/bbb/ccc.html'</span>);</span><br><span class="line">=&gt; .html</span><br></pre></td></tr></table></figure><h2 id="4-path-join-â€¦paths"><a href="#4-path-join-â€¦paths" class="headerlink" title="4. path.join([â€¦paths])"></a>4. path.join([â€¦paths])</h2><p>path.join() æ–¹æ³•ä½¿ç”¨å¹³å°ç‰¹å®šçš„åˆ†éš”ç¬¦æŠŠå…¨éƒ¨ç»™å®šçš„ path ç‰‡æ®µè¿æ¥åˆ°ä¸€èµ·ï¼Œå¹¶è§„èŒƒåŒ–ç”Ÿæˆçš„è·¯å¾„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">'/a'</span>,<span class="string">'b'</span>);             =&gt; <span class="string">'/a/b'</span></span><br><span class="line">path.join(<span class="string">'/a'</span>,<span class="string">'b'</span>, <span class="string">'..'</span>, <span class="string">'c'</span>)   =&gt; <span class="string">'/a/c'</span></span><br></pre></td></tr></table></figure><h2 id="5-path-relative-from-to"><a href="#5-path-relative-from-to" class="headerlink" title="5. path.relative(from, to)"></a>5. path.relative(from, to)</h2><p>path.relative() æ–¹æ³•è¿”å›ä» from åˆ° to çš„ç›¸å¯¹è·¯å¾„ï¼Œé€šä¿—ç‚¹å°†å°±æ˜¯ï¼Œä»fromä¸ºèµ·ç‚¹ï¼Œtoç›¸å¯¹äºå®ƒçš„è·¯å¾„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.relative(<span class="string">'/a/b/c/test'</span>, <span class="string">'/a/b/d/test2'</span>);</span><br><span class="line">=&gt; <span class="string">'../../d/test2'</span></span><br></pre></td></tr></table></figure><h2 id="6-path-resolve-â€¦paths"><a href="#6-path-resolve-â€¦paths" class="headerlink" title="6. path.resolve([â€¦paths])"></a>6. path.resolve([â€¦paths])</h2><p>path.resolve() æ–¹æ³•ä¼šæŠŠä¸€ä¸ªè·¯å¾„æˆ–è·¯å¾„ç‰‡æ®µçš„åºåˆ—è§£æä¸ºä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚ç»™å®šçš„è·¯å¾„çš„åºåˆ—æ˜¯ä»å³å¾€å·¦è¢«å¤„ç†çš„ï¼Œåé¢æ¯ä¸ª path è¢«ä¾æ¬¡è§£æï¼Œç›´åˆ°æ„é€ å®Œæˆä¸€ä¸ªç»å¯¹è·¯å¾„åè¿”å›ã€‚å¦‚æœå¤„ç†å®Œå…¨éƒ¨ç»™å®šçš„ path ç‰‡æ®µåè¿˜æœªç”Ÿæˆä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œåˆ™å½“å‰å·¥ä½œç›®å½•ä¼šè¢«ç”¨ä¸Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.resolve(<span class="string">'/a/b'</span>, <span class="string">'./test'</span>);             =&gt; <span class="regexp">/a/</span>b/test</span><br><span class="line">path.resolve(<span class="string">'a'</span>, <span class="string">'b/c/'</span>, <span class="string">'../d/test'</span>);     =&gt; <span class="regexp">/home/</span>toy/a/b/d/test</span><br></pre></td></tr></table></figure><h1 id="File-System"><a href="#File-System" class="headerlink" title="File System"></a>File System</h1><h2 id="1-fs-open-path-flags-mode-callback"><a href="#1-fs-open-path-flags-mode-callback" class="headerlink" title="1. fs.open(path, flags[, mode], callback)"></a>1. fs.open(path, flags[, mode], callback)</h2><p>å¼‚æ­¥åœ°æ‰“å¼€æ–‡ä»¶,callbackæœ‰ä¸¤ä¸ªå‚æ•° errå’Œfd  fdæ˜¯è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.open(<span class="string">'./a.txt'</span>, <span class="string">'r'</span>, <span class="string">'0666'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fd);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="2-fs-read-fd-buffer-offset-length-position-callback"><a href="#2-fs-read-fd-buffer-offset-length-position-callback" class="headerlink" title="2. fs.read(fd, buffer, offset, length, position, callback)"></a>2. fs.read(fd, buffer, offset, length, position, callback)</h2><p>ä» fd æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚<br>buffer æ˜¯æ•°æ®å°†è¢«å†™å…¥åˆ°çš„ bufferã€‚<br>offset æ˜¯ buffer ä¸­å¼€å§‹å†™å…¥çš„åç§»é‡ã€‚<br>length æ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡å®šè¦è¯»å–çš„å­—èŠ‚æ•°ã€‚<br>position æ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡å®šä»æ–‡ä»¶ä¸­å¼€å§‹è¯»å–çš„ä½ç½®ã€‚ å¦‚æœ position ä¸º nullï¼Œåˆ™æ•°æ®ä»å½“å‰æ–‡ä»¶ä½ç½®å¼€å§‹è¯»å–ã€‚</p><h2 id="3-fs-readFile-file-options-callback"><a href="#3-fs-readFile-file-options-callback" class="headerlink" title="3. fs.readFile(file[, options], callback)"></a>3. fs.readFile(file[, options], callback)</h2><p>å¼‚æ­¥çš„è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹,å¦‚æœå­—ç¬¦ç¼–ç æœªæŒ‡å®šï¼Œåˆ™è¿”å›åŸå§‹çš„ bufferã€‚å®ƒæ˜¯å¯¹readæ–¹æ³•çš„ä¸€ä¸ªè¿›ä¸€æ­¥å°è£…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(<span class="string">'./a.txt'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="Demo-è¯»å–æ–‡ä»¶"><a href="#Demo-è¯»å–æ–‡ä»¶" class="headerlink" title="Demo - è¯»å–æ–‡ä»¶"></a>Demo - è¯»å–æ–‡ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fs.open(<span class="string">'./a.txt'</span>, <span class="string">'r'</span>, (err, fd) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> buf = Buffer.alloc(<span class="number">255</span>);</span><br><span class="line">    fs.read(fd, buf, <span class="number">0</span>, <span class="number">6</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, byteRead, buffer</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(byteRead); <span class="comment">// å®é™…è¯»å–çš„å­—èŠ‚æ•°</span></span><br><span class="line">        <span class="built_in">console</span>.log(buffer.toString());   <span class="comment">// è¢«è¯»å–çš„ç¼“å­˜åŒºbuffer</span></span><br><span class="line">        fs.close(fd, err =&gt; &#123;</span><br><span class="line">            <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h2 id="4-fs-write-fd-data-position-encoding-callback"><a href="#4-fs-write-fd-data-position-encoding-callback" class="headerlink" title="4. fs.write(fd, data[, position[, encoding]], callback)"></a>4. fs.write(fd, data[, position[, encoding]], callback)</h2><p>å†™å…¥ data åˆ° fd æŒ‡å®šçš„æ–‡ä»¶ã€‚ å¦‚æœ data ä¸æ˜¯ä¸€ä¸ª Buffer å®ä¾‹ï¼Œåˆ™è¯¥å€¼å°†è¢«å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<br>position æŒ‡å‘ä»æ–‡ä»¶å¼€å§‹å†™å…¥æ•°æ®çš„ä½ç½®çš„åç§»é‡ï¼Œencoding æ˜¯æœŸæœ›çš„å­—ç¬¦ä¸²ç¼–ç ã€‚å›è°ƒæœ‰ä¸‰ä¸ªå‚æ•° (err, written, string)ï¼Œå…¶ä¸­ written æŒ‡å®šä¼ å…¥çš„å­—ç¬¦ä¸²è¢«å†™å…¥å¤šå°‘å­—èŠ‚</p><p>åœ¨ Linux ä¸Šï¼Œå½“æ–‡ä»¶ä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€æ—¶ï¼ŒæŒ‡å®šä½ç½®çš„å†™å…¥æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ å†…æ ¸ä¼šå¿½ç•¥ä½ç½®å‚æ•°ï¼Œå¹¶æ€»æ˜¯å°†æ•°æ®è¿½åŠ åˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚</p><h2 id="5-fs-writeFile-file-data-options-callback"><a href="#5-fs-writeFile-file-data-options-callback" class="headerlink" title="5. fs.writeFile(file, data[, options], callback)"></a>5. fs.writeFile(file, data[, options], callback)</h2><p>å¼‚æ­¥åœ°å†™å…¥æ•°æ®åˆ°æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™å†™å…¥çš„å†…å®¹ä¼šæ›¿æ¢åŸæœ‰çš„å†…å®¹ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºæ–‡ä»¶ã€‚ data å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ª bufferã€‚å¦‚æœ data æ˜¯ä¸€ä¸ª bufferï¼Œåˆ™å¿½ç•¥ encoding é€‰é¡¹ã€‚å®ƒé»˜è®¤ä¸º â€˜utf8â€™ã€‚</p><p>å®ƒæ˜¯å¯¹writeæ–¹æ³•çš„è¿›ä¸€æ­¥å°è£…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(<span class="string">'./a.txt'</span>, <span class="string">'Hello Node.js'</span>, (err) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'write finshed!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><blockquote><p>fs.write()å’Œfs.writeFile()æ–¹æ³•çš„æ¯”è¾ƒ(åŒread)</p></blockquote><p>ä¸fs.readFile()æ–¹æ³•å’Œfs.read()æ–¹æ³•çš„å…³ç³»ç±»ä¼¼ã€‚fs.writeFile()ä¹Ÿæ˜¯å¯¹fs.write()æ–¹æ³•çš„è¿›ä¸€æ­¥å°è£…ï¼Œä½¿ç”¨fs.readFile()æ–¹æ³•çœç•¥äº†åˆ›å»ºæ–‡ä»¶æè¿°ç¬¦çš„è¿‡ç¨‹ï¼Œå¯ä»¥æ›´æ–¹ä¾¿çš„å‘æ–‡ä»¶å†™å…¥æ•°æ®ã€‚</p><blockquote><p>fs.close() æ‰“å¼€çš„æ–‡ä»¶æœ€åéœ€è¦åŠæ—¶å…³æ‰</p></blockquote><p>å…¶å®å¦‚æœä¸è°ƒç”¨close()å¹¶ä¸ä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯Nodeå¯¹åŒæ—¶æ‰“å¼€çš„æ–‡ä»¶æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ã€‚å¦‚æœä½ ä¸åœçš„openä¸€ä¸ªæ–‡ä»¶è€Œä¸closeï¼Œæœ€åå°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼šEMFILE: too many open files error.</p><hr><h2 id="6-fs-appendFile-file-data-options-callback"><a href="#6-fs-appendFile-file-data-options-callback" class="headerlink" title="6. fs.appendFile(file, data[, options], callback)"></a>6. fs.appendFile(file, data[, options], callback)</h2><p>å¼‚æ­¥åœ°è¿½åŠ æ•°æ®åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ã€‚ data å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ– bufferã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.appendFile(<span class="string">'./a.txt'</span>, <span class="string">', Hello Hujiang!'</span>, (err) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'append complete!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="Demo-å†™å…¥å†…å®¹åˆ°æ–‡ä»¶"><a href="#Demo-å†™å…¥å†…å®¹åˆ°æ–‡ä»¶" class="headerlink" title="Demo - å†™å…¥å†…å®¹åˆ°æ–‡ä»¶"></a>Demo - å†™å…¥å†…å®¹åˆ°æ–‡ä»¶</h2><p>æ³¨æ„æ­¤æ—¶åº”è¯¥ç”¨è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå¦åˆ™å†™å…¥ä¸æˆåŠŸï¼Œä¼šæŠ¥é”™</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fs.open(<span class="string">'./a.txt'</span>, <span class="string">'r+'</span>, (err, fd) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> buf = Buffer.from(<span class="string">'Nodejså¥½ç‰›é€¼'</span>);</span><br><span class="line">    <span class="comment">//åªå†™å…¥â€œå¥½ç‰›é€¼â€è¿™ä¸‰ä¸ªå­—</span></span><br><span class="line">    fs.write(fd, buf, <span class="number">6</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, written, buffer</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="built_in">console</span>.log(written); <span class="comment">// å®é™…è¯»å–çš„å­—èŠ‚æ•°</span></span><br><span class="line">        <span class="built_in">console</span>.log(buffer.toString());   <span class="comment">// è¢«è¯»å–çš„ç¼“å­˜åŒºbuffer</span></span><br><span class="line">        fs.close(fd, err =&gt; &#123;</span><br><span class="line">            <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åˆ·æ–°ç¼“å­˜åŒº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fs.open(<span class="string">'./a.txt'</span>, <span class="string">'r+'</span>, (err, fd) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> buf = Buffer.from(<span class="string">'Nodejså¥½ç‰›é€¼'</span>);</span><br><span class="line">    <span class="comment">//åªå†™å…¥â€œå¥½ç‰›é€¼â€è¿™ä¸‰ä¸ªå­—</span></span><br><span class="line">    fs.write(fd, buf, <span class="number">0</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, written, buffer</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="built_in">console</span>.log(written); <span class="comment">// å®é™…å†™å…¥çš„å­—èŠ‚æ•°</span></span><br><span class="line">        fs.write(fd, buf, <span class="number">6</span>, <span class="number">6</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, written, buffer</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(written);</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;path æ¨¡å—æä¾›äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸ç›®å½•çš„è·¯å¾„&lt;br&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Node" scheme="https://tianxiaohu.online/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>IOS ( Safari ) è¿”å›é¡µé¢ä¸åˆ·æ–°å¦‚ä½•è§£å†³ï¼Ÿ</title>
    <link href="https://tianxiaohu.online/2017/04/11/front-end/javascript/ios-back-fix/"/>
    <id>https://tianxiaohu.online/2017/04/11/front-end/javascript/ios-back-fix/</id>
    <published>2017-04-11T22:39:00.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¹³æ—¶å¼€å‘ç§»åŠ¨ç«¯é¡¹ç›®çš„æ—¶å€™ï¼Œæ˜¯å¦è¢«<code>IOS</code>æˆ–è€…éƒ¨åˆ†<code>Android</code>æµè§ˆå™¨è¿”å›é¡µé¢ä¸åˆ·æ–°çš„é—®é¢˜å›°æ‰°è¿‡ï¼Ÿè¿™ä¸ªé—®é¢˜åº”è¯¥æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé—®é¢˜ã€‚</p><a id="more"></a><p>æ¯”å¦‚ä¸€ä¸ªå…¸å‹çš„åœºæ™¯ï¼šé¡µé¢æœªç™»å½•ï¼Œç‚¹å‡»é¡µé¢æŸä¸ªæŒ‰é’®åè·³è½¬å…¬å…±çš„ç™»å½•é¡µé¢å®Œæˆç™»å½•åï¼Œç‚¹å‡»æµè§ˆå™¨è¿”å›æŒ‰é’®ã€‚è¿”å›åˆ°ä¸Šä¸ªé¡µé¢ï¼Œå‘ç°é¡µé¢ç›´æ¥ä»ç¼“å­˜è¯»å–ï¼Œå¹¶æ²¡æœ‰åˆ·æ–°ï¼Œå¯¼è‡´æœ€æ–°çš„ç™»å½•æ€æ— æ³•è·å¾—ã€‚å½“ç„¶äº†ï¼Œå¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œç™»å½•é¡µé¢æ˜¯å‰ç«¯çš„<code>router</code><br>è‡ªç„¶æ˜¯æ²¡è¿™ä¸ªé—®é¢˜äº†ã€‚</p><p>å¦‚æœæ˜¯éå•é¡µï¼Œé€šè¿‡<code>location.href</code>çš„æ–¹å¼è·³èµ°å†è¿”å›è¿™ç§æƒ…å†µè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><h2 id="PageTransitionEvent-persisted"><a href="#PageTransitionEvent-persisted" class="headerlink" title="PageTransitionEvent.persisted"></a>PageTransitionEvent.persisted</h2><p>é‚£æ—¢ç„¶æ˜¯å› ä¸ºè¯»å–äº†ç¼“å­˜å¯¼è‡´ï¼Œå¦‚æœå¯ä»¥åˆ¤æ–­æ˜¯ä¸æ˜¯èµ°äº†ç¼“å­˜ï¼Œå²‚ä¸æ˜¯å°±èƒ½è§£å†³é—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯å¯è¡Œçš„ï¼</p><p><code>PageTransitionEvent</code> çš„åªè¯»å±æ€§ <code>persisted</code> ä»£è¡¨ä¸€ä¸ªé¡µé¢æ˜¯å¦ä»ç¼“å­˜ä¸­åŠ è½½çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'pageshow'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (event.persisted) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Page was loaded from cache.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>åœ¨é¡µé¢å±•ç¤ºçš„æ—¶å€™åˆ¤æ–­æ˜¯ä¸æ˜¯èµ°äº†ç¼“å­˜ï¼Œå¦‚æœæ˜¯ï¼Œé‚£å°±é‡æ–°åˆ·æ–°é¡µé¢ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> browserRule = <span class="regexp">/^.*((iPhone)|(iPad)|(Safari))+.*$/</span>;</span><br><span class="line"><span class="keyword">if</span> (browserRule.test(navigator.userAgent)) &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'pageshow'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.persisted) &#123;</span><br><span class="line">            <span class="built_in">window</span>.location.reload();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šå¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯IOSæ‰ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œæ³¨æ„åˆ¤æ–­ä¸‹è®¾å¤‡æ˜¯IOSè®¾å¤‡å†æ·»åŠ æ­¤ä»£ç ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å¹³æ—¶å¼€å‘ç§»åŠ¨ç«¯é¡¹ç›®çš„æ—¶å€™ï¼Œæ˜¯å¦è¢«&lt;code&gt;IOS&lt;/code&gt;æˆ–è€…éƒ¨åˆ†&lt;code&gt;Android&lt;/code&gt;æµè§ˆå™¨è¿”å›é¡µé¢ä¸åˆ·æ–°çš„é—®é¢˜å›°æ‰°è¿‡ï¼Ÿè¿™ä¸ªé—®é¢˜åº”è¯¥æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>debounce &amp; throttle</title>
    <link href="https://tianxiaohu.online/2017/01/14/front-end/javascript/debounce-vs-throttle/"/>
    <id>https://tianxiaohu.online/2017/01/14/front-end/javascript/debounce-vs-throttle/</id>
    <published>2017-01-14T20:00:46.000Z</published>
    <updated>2021-08-09T06:35:13.236Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸‹ä¸ªäººå¯¹é˜²æŠ–å‡½æ•°å’ŒèŠ‚æµå‡½æ•°çš„ç†è§£ï¼Œåœ¨é«˜é¢‘è§¦å‘çš„äº‹ä»¶ä¸­ï¼Œè¾ƒä¸ºå®ç”¨ã€‚<br> <a id="more"></a></p><h2 id="debounce-func-wait-0-options"><a href="#debounce-func-wait-0-options" class="headerlink" title="_.debounce (func, [wait=0], [options])"></a>_.debounce (func, [wait=0], [options])</h2><p>åˆ›å»ºä¸€ä¸ªé˜²æŠ–åŠ¨å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šåœ¨ wait æ¯«ç§’åè°ƒç”¨ func æ–¹æ³•ã€‚è¯¥å‡½æ•°æä¾›ä¸€ä¸ª cancel æ–¹æ³•å–æ¶ˆå»¶è¿Ÿçš„å‡½æ•°è°ƒç”¨ä»¥åŠ flush æ–¹æ³•ç«‹å³è°ƒç”¨ã€‚å¯ä»¥æä¾›ä¸€ä¸ª options å¯¹è±¡å†³å®šå¦‚ä½•è°ƒç”¨ func æ–¹æ³•ï¼Œoptions.leading å’Œ options.trailing å†³å®šå»¶è¿Ÿå‰åå¦‚ä½•è§¦å‘ã€‚func ä¼šä¼ å…¥æœ€åä¸€æ¬¡ä¼ å…¥çš„å‚æ•°ç»™é˜²æŠ–åŠ¨å‡½æ•°ã€‚éšåè°ƒç”¨çš„é˜²æŠ–åŠ¨å‡½æ•°è¿”å›æ˜¯æœ€åä¸€æ¬¡ func è°ƒç”¨çš„ç»“æœã€‚</p><p>ä¸ªäººç†è§£:</p><ul><li><p>wait = 400, leading = false, trailing = true<br>å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œå½“äº‹ä»¶è¿ç»­è§¦å‘æˆ–ä¸¤æ¬¡è§¦å‘é—´éš”å°äº400msçš„æ—¶å€™å‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œç›´åˆ°äº‹ä»¶åœæ­¢è§¦å‘ä¸”éš”æ—¶é—´å¤§äº400msï¼Œå‡½æ•°æ‰§è¡Œä¸€æ¬¡ã€‚è‹¥é—´éš”æ—¶é—´å°äº400msæ—¶å†æ¬¡è§¦å‘äº‹ä»¶ï¼Œåˆ™å‡½æ•°æ‰§è¡Œæ—¶é—´é‡æ–°å¼€å§‹è®¡ç®—ã€‚</p></li><li><p>wait = 400, leading = true, trailing = false<br>å‡½æ•°å…ˆç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œå½“äº‹ä»¶è¿ç»­è§¦å‘æˆ–ä¸¤æ¬¡è§¦å‘é—´éš”å°äº400msçš„æ—¶å€™å‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œåªæœ‰å½“äº‹ä»¶åœæ­¢è§¦å‘ä¸”é—´éš”æ—¶é—´å¤§äº400msæ—¶ï¼Œå‡½æ•°æ‰ä¼šå˜æˆå¯æ‰§è¡ŒçŠ¶æ€ï¼ˆæ­¤æ—¶å¹¶ä¸ä¼šè‡ªåŠ¨è‡ªåŠ¨è§¦å‘ï¼‰ï¼Œæ­¤æ—¶å†æ¬¡è§¦å‘äº‹ä»¶ï¼Œå‡½æ•°ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡ã€‚</p></li><li><p>wait = 400, leading = true, trailing = true<br>å¦‚æœéƒ½è®¾ä¸ºtrueçš„è¯ï¼Œå…¶å®æ•ˆæœæ˜¯ç›¸å½“äºä¸¤ä¸ªçš„ç»“åˆï¼Œå‡½æ•°é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ</p></li></ul><p>åœºæ™¯1ï¼šé¡µé¢resizeæ—¶å€™ï¼Œæ˜¾ç¤ºçª—å£å¤§å°<br>åœºæ™¯2ï¼šå®æ—¶åŠ¨æ€æœç´¢æ¡†</p><p>æ¢ä¸€ç§æ–¹å¼å®ç°Debounce</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, wait</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="throttle-func-wait-0-options"><a href="#throttle-func-wait-0-options" class="headerlink" title="_.throttle (func, [wait=0], [options])"></a>_.throttle (func, [wait=0], [options])</h2><p>åˆ›å»ºä¸€ä¸ªèŠ‚æµå‡½æ•°ï¼Œåœ¨ wait ç§’å†…æœ€å¤šæ‰§è¡Œ func ä¸€æ¬¡çš„å‡½æ•°ã€‚è¯¥å‡½æ•°æä¾›ä¸€ä¸ª cancel æ–¹æ³•å–æ¶ˆå»¶è¿Ÿå‡½æ•°è°ƒç”¨ä»¥åŠ flush æ–¹æ³•ç«‹å³è°ƒç”¨ã€‚å¯ä»¥æä¾›ä¸€ä¸ª options å¯¹è±¡å†³å®šå¦‚ä½•è°ƒç”¨ func æ–¹æ³•ï¼Œoptions.leading å’Œ options.trailing å†³å®š wait å‰åå¦‚ä½•è§¦å‘ã€‚func ä¼šä¼ å…¥æœ€åä¸€æ¬¡ä¼ å…¥çš„å‚æ•°ç»™è¿™ä¸ªå‡½æ•°ã€‚éšåè°ƒç”¨çš„å‡½æ•°è¿”å›æ˜¯æœ€åä¸€æ¬¡ func è°ƒç”¨çš„ç»“æœã€‚</p><p>æ³¨æ„: å¦‚æœ leading å’Œ trailing éƒ½è®¾å®šä¸º trueã€‚ åˆ™ func å…è®¸ trailing æ–¹å¼è°ƒç”¨çš„æ¡ä»¶ä¸º: åœ¨ wait æœŸé—´å¤šæ¬¡è°ƒç”¨ã€‚</p><p>ç›¸å½“äºæ˜¯ç»™çš„bounceæ–¹æ³•æŒ‡å®šå‚æ•°ï¼š maxWaitã€leading=trueã€trailing=true</p><p>åœºæ™¯1ï¼šé¡µé¢ç¼©æ”¾å§‹ç»ˆä¿æŒå¼¹çª—å±…ä¸­æ˜¾ç¤º<br>åœºæ™¯2ï¼šä¸‹æ‹‰åŠ è½½</p><p>æ¢ä¸€ç§ç®€å•çš„æ–¹å¼å®ç°Throttle</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timer = <span class="literal">null</span>,</span><br><span class="line">        flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">            flag = <span class="literal">false</span></span><br><span class="line">            timer &amp;&amp; clearTimeout(timer)</span><br><span class="line">            timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                flag = <span class="literal">true</span></span><br><span class="line">            &#125;, wait)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èŠ‚æµå’Œé˜²æŠ–åŒºåˆ«"><a href="#èŠ‚æµå’Œé˜²æŠ–åŒºåˆ«" class="headerlink" title="èŠ‚æµå’Œé˜²æŠ–åŒºåˆ«"></a>èŠ‚æµå’Œé˜²æŠ–åŒºåˆ«</h2><p>æœ€å¤§çš„ä¸åŒï¼Œé€šä¿—ç‚¹è¯´å°±æ˜¯Debounceçš„å‡½æ•°å¯èƒ½å¾ˆä¹…éƒ½ä¸ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä½†æ˜¯Throttleçš„å‡½æ•°åˆ™ä¿è¯äº†åœ¨ç»™å®šçš„waitæ—¶é—´å†…è‚¯å®šä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¿è¯äº†å‡½æ•°çš„æ‰§è¡Œã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®°å½•ä¸‹ä¸ªäººå¯¹é˜²æŠ–å‡½æ•°å’ŒèŠ‚æµå‡½æ•°çš„ç†è§£ï¼Œåœ¨é«˜é¢‘è§¦å‘çš„äº‹ä»¶ä¸­ï¼Œè¾ƒä¸ºå®ç”¨ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="webå‰ç«¯" scheme="https://tianxiaohu.online/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://tianxiaohu.online/tags/JavaScript/"/>
    
  </entry>
  
</feed>
